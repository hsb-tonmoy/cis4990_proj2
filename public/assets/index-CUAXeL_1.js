var Wr=Object.defineProperty;var Vr=(e,t,n)=>t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var lt=(e,t,n)=>(Vr(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Ce(){}function Mn(e){return e()}function Zt(){return Object.create(null)}function Qe(e){e.forEach(Mn)}function Nn(e){return typeof e=="function"}function On(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Fr(e){return Object.keys(e).length===0}function z(e,t){e.appendChild(t)}function Me(e,t,n){e.insertBefore(t,n||null)}function he(e){e.parentNode&&e.parentNode.removeChild(e)}function Y(e){return document.createElement(e)}function Je(e){return document.createTextNode(e)}function ce(){return Je(" ")}function jr(){return Je("")}function $r(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function H(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function qr(e){return Array.from(e.childNodes)}function kn(e,t){t=""+t,e.data!==t&&(e.data=t)}function Kt(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Gr(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Re;function Ie(e){Re=e}function In(){if(!Re)throw new Error("Function called outside component initialization");return Re}function zr(e){In().$$.on_mount.push(e)}function Hr(){const e=In();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=Gr(t,n,{cancelable:r});return o.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}const be=[],mt=[];let Ae=[];const gt=[],Xr=Promise.resolve();let wt=!1;function Yr(){wt||(wt=!0,Xr.then(Rn))}function _t(e){Ae.push(e)}function Zr(e){gt.push(e)}const dt=new Set;let ye=0;function Rn(){if(ye!==0)return;const e=Re;do{try{for(;ye<be.length;){const t=be[ye];ye++,Ie(t),Kr(t.$$)}}catch(t){throw be.length=0,ye=0,t}for(Ie(null),be.length=0,ye=0;mt.length;)mt.pop()();for(let t=0;t<Ae.length;t+=1){const n=Ae[t];dt.has(n)||(dt.add(n),n())}Ae.length=0}while(be.length);for(;gt.length;)gt.pop()();wt=!1,dt.clear(),Ie(e)}function Kr(e){if(e.fragment!==null){e.update(),Qe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_t)}}function Qr(e){const t=[],n=[];Ae.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Ae=t}const je=new Set;let Jr;function Sn(e,t){e&&e.i&&(je.delete(e),e.i(t))}function eo(e,t,n,r){if(e&&e.o){if(je.has(e))return;je.add(e),Jr.c.push(()=>{je.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function to(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function no(e){e&&e.c()}function Ln(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),_t(()=>{const s=e.$$.on_mount.map(Mn).filter(Nn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Qe(s),e.$$.on_mount=[]}),o.forEach(_t)}function Pn(e,t){const n=e.$$;n.fragment!==null&&(Qr(n.after_update),Qe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ro(e,t){e.$$.dirty[0]===-1&&(be.push(e),Yr(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Un(e,t,n,r,o,s,i=null,c=[-1]){const a=Re;Ie(e);const u=e.$$={fragment:null,ctx:[],props:s,update:Ce,not_equal:o,bound:Zt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Zt(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};i&&i(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(l,m,...w)=>{const p=w.length?w[0]:m;return u.ctx&&o(u.ctx[l],u.ctx[l]=p)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](p),d&&ro(e,l)),m}):[],u.update(),d=!0,Qe(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const l=qr(t.target);u.fragment&&u.fragment.l(l),l.forEach(he)}else u.fragment&&u.fragment.c();t.intro&&Sn(e.$$.fragment),Ln(e,t.target,t.anchor),Rn()}Ie(a)}class Bn{constructor(){lt(this,"$$");lt(this,"$$set")}$destroy(){Pn(this,1),this.$destroy=Ce}$on(t,n){if(!Nn(n))return Ce;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Fr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const oo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(oo);const Qt=""+new URL("mic-HR1ivggp.png",import.meta.url).href,Jt=""+new URL("stop-BDP2NVE4.png",import.meta.url).href,so=e=>t=>{const n=e(t);return t.add(n),n},io=e=>(t,n)=>(e.set(t,n),n),en=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,xn=536870912,tn=xn*2,ao=(e,t)=>n=>{const r=t.get(n);let o=r===void 0?n.size:r<tn?r+1:0;if(!n.has(o))return e(n,o);if(n.size<xn){for(;n.has(o);)o=Math.floor(Math.random()*tn);return e(n,o)}if(n.size>en)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(o);)o=Math.floor(Math.random()*en);return e(n,o)},Dn=new WeakMap,co=io(Dn),It=ao(co,Dn),uo=so(It),lo=e=>typeof e.start=="function",nn=new WeakMap,fo=e=>({...e,connect:({call:t})=>async()=>{const{port1:n,port2:r}=new MessageChannel,o=await t("connect",{port:n},[n]);return nn.set(r,o),r},disconnect:({call:t})=>async n=>{const r=nn.get(n);if(r===void 0)throw new Error("The given port is not connected.");await t("disconnect",{portId:r})},isSupported:({call:t})=>()=>t("isSupported")}),ft=new WeakMap,ho=e=>{if(ft.has(e))return ft.get(e);const t=new Map;return ft.set(e,t),t},Wn=e=>{const t=fo(e);return n=>{const r=ho(n);n.addEventListener("message",({data:c})=>{const{id:a}=c;if(a!==null&&r.has(a)){const{reject:u,resolve:d}=r.get(a);r.delete(a),c.error===void 0?d(c.result):u(new Error(c.error.message))}}),lo(n)&&n.start();const o=(c,a=null,u=[])=>new Promise((d,l)=>{const m=It(r);r.set(m,{reject:l,resolve:d}),a===null?n.postMessage({id:m,method:c},u):n.postMessage({id:m,method:c,params:a},u)}),s=(c,a,u=[])=>{n.postMessage({id:null,method:c,params:a},u)};let i={};for(const[c,a]of Object.entries(t))i={...i,[c]:a({call:o,notify:s})};return{...i}}},rn=new Set,po=Wn({encode:({call:e})=>async(t,n)=>{const r=await e("encode",{encoderId:t,timeslice:n});return rn.delete(t),r},instantiate:({call:e})=>async(t,n)=>{const r=uo(rn),o=await e("instantiate",{encoderId:r,mimeType:t,sampleRate:n});return{encoderId:r,port:o}},register:({call:e})=>t=>e("register",{port:t},[t])}),mo=e=>{const t=new Worker(e);return po(t)},go=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),c=void 0===a?r.size:a<s?a+1:0;if(!r.has(c))return e(r,c);if(r.size<o){for(;r.has(c);)c=Math.floor(Math.random()*s);return e(r,c)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(c);)c=Math.floor(Math.random()*n);return e(r,c)}},c=new WeakMap,i=r(c),l=a(i,c),u=t(l);e.addUniqueNumber=u,e.generateUniqueNumber=l}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),a=(t,r)=>async a=>{let{data:{id:c,method:i,params:l}}=a;const u=r[i];try{if(void 0===u)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(i);const r=void 0===l?u():u(l);if(void 0===r)throw(t=>o('The handler of the method called "'.concat(t,'" returned no required result.'),e))(i);const a=r instanceof Promise?await r:r;if(null===c){if(void 0!==a.result)throw s(i)}else{if(void 0===a.result)throw s(i);const{result:e,transferables:r=[]}=a;t.postMessage({id:c,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:c})}};var c=r(455);const i=new Map,l=(e,r,n)=>({...r,connect:t=>{let{port:n}=t;n.start();const o=e(n,r),s=(0,c.generateUniqueNumber)(i);return i.set(s,(()=>{o(),n.close(),i.delete(s)})),{result:s}},disconnect:e=>{let{portId:r}=e;const n=i.get(r);if(void 0===n)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(r);return n(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=function(e,t){const r=l(u,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=a(e,r);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)},d=e=>{e.onmessage=null,e.close()},h=new WeakMap,f=new WeakMap,p=(e=>{const t=(r=e,{...r,connect:e=>{let{call:t}=e;return async()=>{const{port1:e,port2:r}=new MessageChannel,n=await t("connect",{port:e},[e]);return h.set(r,n),r}},disconnect:e=>{let{call:t}=e;return async e=>{const r=h.get(e);if(void 0===r)throw new Error("The given port is not connected.");await t("disconnect",{portId:r})}},isSupported:e=>{let{call:t}=e;return()=>t("isSupported")}});var r;return e=>{const r=(e=>{if(f.has(e))return f.get(e);const t=new Map;return f.set(e,t),t})(e);e.addEventListener("message",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>"function"==typeof e.start)(e)&&e.start();const n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((s,a)=>{const i=(0,c.generateUniqueNumber)(r);r.set(i,{reject:a,resolve:s}),null===n?e.postMessage({id:i,method:t},o):e.postMessage({id:i,method:t,params:n},o)}))},o=function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)};let s={};for(const[e,r]of Object.entries(t))s={...s,[e]:r({call:n,notify:o})};return{...s}}})({characterize:e=>{let{call:t}=e;return()=>t("characterize")},encode:e=>{let{call:t}=e;return(e,r)=>t("encode",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t("record",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),w=async(e,t)=>{const r=p(t),n=await r.characterize(),o=n.toString();if(e.has(o))throw new Error("There is already an encoder stored which handles exactly the same mime types.");return e.set(o,[n,r]),n},m=new Map,g=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error("There was no instance of an encoder stored with the given id.");return r})(m),v=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(m,g),y=new Map,M=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise((t=>{o.onmessage=s=>{let{data:c}=s;0===c.length?(e(o),t(n.encode(r,null))):n.record(r,a,c)}})):n.encode(r,null)})(d,v),E=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error("There is no encoder registered which could handle the given mimeType.")})(y),b=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error('There is already an encoder registered with an id called "'.concat(n,'".'));const a=r(o),{port1:c,port2:i}=new MessageChannel,l=[a,c,!0,s];return t.set(n,l),c.onmessage=t=>{let{data:r}=t;0===r.length?(e(c),l[2]=!1):a.record(n,s,r.map((e=>"number"==typeof e?new Float32Array(e):e)))},i})(d,m,E),T=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(g);u(self,{encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await M(t):await T(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=b(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await w(y,t)}}})})()})();`,wo=new Blob([go],{type:"application/javascript; charset=utf-8"}),Vn=URL.createObjectURL(wo),Rt=mo(Vn),qe=Rt.encode,Fn=Rt.instantiate,_o=Rt.register;URL.revokeObjectURL(Vn);const vo=e=>(t,n)=>{if(e===null)throw new Error("A native BlobEvent could not be created.");return new e(t,n)},yo=(e,t)=>(n,r,o)=>{const s=[];let i=r,c=0;for(;c<n.byteLength;)if(i===null){const a=t(n,c);if(a===null)break;const{length:u,type:d}=a;i=d,c+=u}else{const a=e(n,c,i,o);if(a===null)break;const{content:u,length:d}=a;i=null,c+=d,u!==null&&s.push(u)}return{contents:s,currentElementType:i,offset:c}},bo=(e,t)=>class{constructor(r=null){this._listeners=new WeakMap,this._nativeEventTarget=r===null?e():r}addEventListener(r,o,s){if(o!==null){let i=this._listeners.get(o);i===void 0&&(i=t(this,o),typeof o=="function"&&this._listeners.set(o,i)),this._nativeEventTarget.addEventListener(r,i,s)}}dispatchEvent(r){return this._nativeEventTarget.dispatchEvent(r)}removeEventListener(r,o,s){const i=o===null?void 0:this._listeners.get(o);this._nativeEventTarget.removeEventListener(r,i===void 0?null:i,s)}},Eo=e=>()=>{if(e===null)throw new Error("A native EventTarget could not be created.");return e.document.createElement("p")},Ao=(e="")=>{try{return new DOMException(e,"InvalidModificationError")}catch(t){return t.code=13,t.message=e,t.name="InvalidModificationError",t}},Co=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}},To=(e,t,n,r,o,s,i)=>class extends s{constructor(a,u={}){const{mimeType:d}=u;if(i!==null&&(d===void 0||i.isTypeSupported!==void 0&&i.isTypeSupported(d))){const l=e(i,a,u);super(l),this._internalMediaRecorder=l}else if(d!==void 0&&o.some(l=>l.test(d)))super(),i!==null&&i.isTypeSupported!==void 0&&i.isTypeSupported("audio/webm;codecs=pcm")?this._internalMediaRecorder=r(this,i,a,d):this._internalMediaRecorder=n(this,a,d);else throw i!==null&&e(i,a,u),t();this._ondataavailable=null,this._onerror=null,this._onpause=null,this._onresume=null,this._onstart=null,this._onstop=null}get mimeType(){return this._internalMediaRecorder.mimeType}get ondataavailable(){return this._ondataavailable===null?this._ondataavailable:this._ondataavailable[0]}set ondataavailable(a){if(this._ondataavailable!==null&&this.removeEventListener("dataavailable",this._ondataavailable[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("dataavailable",u),this._ondataavailable=[a,u]}else this._ondataavailable=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(a){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("error",u),this._onerror=[a,u]}else this._onerror=null}get onpause(){return this._onpause===null?this._onpause:this._onpause[0]}set onpause(a){if(this._onpause!==null&&this.removeEventListener("pause",this._onpause[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("pause",u),this._onpause=[a,u]}else this._onpause=null}get onresume(){return this._onresume===null?this._onresume:this._onresume[0]}set onresume(a){if(this._onresume!==null&&this.removeEventListener("resume",this._onresume[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("resume",u),this._onresume=[a,u]}else this._onresume=null}get onstart(){return this._onstart===null?this._onstart:this._onstart[0]}set onstart(a){if(this._onstart!==null&&this.removeEventListener("start",this._onstart[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("start",u),this._onstart=[a,u]}else this._onstart=null}get onstop(){return this._onstop===null?this._onstop:this._onstop[0]}set onstop(a){if(this._onstop!==null&&this.removeEventListener("stop",this._onstop[1]),typeof a=="function"){const u=a.bind(this);this.addEventListener("stop",u),this._onstop=[a,u]}else this._onstop=null}get state(){return this._internalMediaRecorder.state}pause(){return this._internalMediaRecorder.pause()}resume(){return this._internalMediaRecorder.resume()}start(a){return this._internalMediaRecorder.start(a)}stop(){return this._internalMediaRecorder.stop()}static isTypeSupported(a){return i!==null&&i.isTypeSupported!==void 0&&i.isTypeSupported(a)||o.some(u=>u.test(a))}},Mo=e=>e!==null&&e.BlobEvent!==void 0?e.BlobEvent:null,No=e=>e===null||e.MediaRecorder===void 0?null:e.MediaRecorder,Oo=e=>(t,n,r)=>{const o=new Map,s=new WeakMap,i=new WeakMap,c=[],a=new t(n,r),u=new WeakMap;return a.addEventListener("stop",({isTrusted:d})=>{d&&setTimeout(()=>c.shift())}),a.addEventListener=(d=>(l,m,w)=>{let p=m;if(typeof m=="function")if(l==="dataavailable"){const f=[];p=g=>{const[[h,v]=[!1,!1]]=c;h&&!v?f.push(g):m.call(a,g)},o.set(m,f),s.set(m,p)}else l==="error"?(p=f=>{f instanceof ErrorEvent?m.call(a,f):m.call(a,new ErrorEvent("error",{error:f.error}))},i.set(m,p)):l==="stop"&&(p=f=>{for(const[g,h]of o.entries())if(h.length>0){const[v]=h;h.length>1&&Object.defineProperty(v,"data",{value:new Blob(h.map(({data:_})=>_),{type:v.data.type})}),h.length=0,g.call(a,v)}m.call(a,f)},u.set(m,p));return d.call(a,l,p,w)})(a.addEventListener),a.removeEventListener=(d=>(l,m,w)=>{let p=m;if(typeof m=="function"){if(l==="dataavailable"){o.delete(m);const f=s.get(m);f!==void 0&&(p=f)}else if(l==="error"){const f=i.get(m);f!==void 0&&(p=f)}else if(l==="stop"){const f=u.get(m);f!==void 0&&(p=f)}}return d.call(a,l,p,w)})(a.removeEventListener),a.start=(d=>l=>{if(r.mimeType!==void 0&&r.mimeType.startsWith("audio/")&&n.getVideoTracks().length>0)throw e();return a.state==="inactive"&&c.push([l!==void 0,!0]),l===void 0?d.call(a):d.call(a,l)})(a.start),a.stop=(d=>()=>{a.state!=="inactive"&&(c[0][1]=!1),d.call(a)})(a.stop),a},vt=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},ko=e=>(t,n,r,o=2)=>{const s=e(t,n);if(s===null)return s;const{length:i,value:c}=s;if(r==="master")return{content:null,length:i};if(n+i+c>t.byteLength)return null;if(r==="binary"){const a=(c/Float32Array.BYTES_PER_ELEMENT-1)/o,u=Array.from({length:o},()=>new Float32Array(a));for(let d=0;d<a;d+=1){const l=d*o+1;for(let m=0;m<o;m+=1)u[m][d]=t.getFloat32(n+i+(l+m)*Float32Array.BYTES_PER_ELEMENT,!0)}return{content:u,length:i+c}}return{content:null,length:i+c}},Io=e=>(t,n)=>{const r=e(t,n);if(r===null)return r;const{length:o,value:s}=r;return s===35?{length:o,type:"binary"}:s===46||s===97||s===88713574||s===106212971||s===139690087||s===172351395||s===256095861?{length:o,type:"master"}:{length:o,type:"unknown"}},Ro=e=>(t,n)=>{const r=e(t,n);if(r===null)return r;const o=n+Math.floor((r-1)/8);if(o+r>t.byteLength)return null;let i=t.getUint8(o)&(1<<8-r%8)-1;for(let c=1;c<r;c+=1)i=(i<<8)+t.getUint8(o+c);return{length:r,value:i}},on=Symbol.observable||"@@observable";function So(e){return Symbol.observable||(typeof e=="function"&&e.prototype&&e.prototype[Symbol.observable]?(e.prototype[on]=e.prototype[Symbol.observable],delete e.prototype[Symbol.observable]):(e[on]=e[Symbol.observable],delete e[Symbol.observable])),e}const We=()=>{},sn=e=>{throw e};function Lo(e){return e?e.next&&e.error&&e.complete?e:{complete:(e.complete??We).bind(e),error:(e.error??sn).bind(e),next:(e.next??We).bind(e)}:{complete:We,error:sn,next:We}}const Po=e=>(t,n,r)=>e(o=>{const s=i=>o.next(i);return t.addEventListener(n,s,r),()=>t.removeEventListener(n,s,r)}),Uo=(e,t)=>{const n=()=>{},r=o=>typeof o[0]=="function";return o=>{const s=(...i)=>{const c=o(r(i)?t({next:i[0]}):t(...i));return c!==void 0?c:n};return s[Symbol.observable]=()=>({subscribe:(...i)=>({unsubscribe:s(...i)})}),e(s)}},Bo=Uo(So,Lo),jn=Po(Bo),xo=(e,t,n)=>async r=>{const o=new e([n],{type:"application/javascript; charset=utf-8"}),s=t.createObjectURL(o);try{await r(s)}finally{t.revokeObjectURL(s)}},Do=e=>({data:t})=>{const{id:n}=t;if(n!==null){const r=e.get(n);if(r!==void 0){const{reject:o,resolve:s}=r;e.delete(n),t.error===void 0?s(t.result):o(new Error(t.error.message))}}},Wo=e=>(t,n)=>(r,o=[])=>new Promise((s,i)=>{const c=e(t);t.set(c,{reject:i,resolve:s}),n.postMessage({id:c,...r},o)}),Vo=(e,t,n,r)=>(o,s,i={})=>{const c=new o(s,"recorder-audio-worklet-processor",{...i,channelCountMode:"explicit",numberOfInputs:1,numberOfOutputs:0}),a=new Map,u=t(a,c.port),d=n(c.port,"message")(e(a));c.port.start();let l="inactive";return Object.defineProperties(c,{pause:{get(){return async()=>(r(["recording"],l),l="paused",u({method:"pause"}))}},port:{get(){throw new Error("The port of a RecorderAudioWorkletNode can't be accessed.")}},record:{get(){return async m=>(r(["inactive"],l),l="recording",u({method:"record",params:{encoderPort:m}},[m]))}},resume:{get(){return async()=>(r(["paused"],l),l="recording",u({method:"resume"}))}},stop:{get(){return async()=>{r(["paused","recording"],l),l="stopped";try{await u({method:"stop"})}finally{d()}}}}}),c},Fo=(e,t)=>{if(!e.includes(t))throw new Error(`Expected the state to be ${e.map(n=>`"${n}"`).join(" or ")} but it was "${t}".`)},jo='(()=>{"use strict";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._numberOfChannels=0,this._state="inactive",this.port.onmessage=e=>{let{data:t}=e;"pause"===t.method?"active"===this._state||"recording"===this._state?(this._state="paused",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"record"===t.method?"inactive"===this._state?(this._encoderPort=t.params.encoderPort,this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"resume"===t.method?"paused"===this._state?(this._state="active",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):"stop"===t.method?"active"!==this._state&&"paused"!==this._state&&"recording"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):"number"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:"The requested method is not supported."},id:t.id})}}process(e){let[t]=e;if("inactive"===this._state||"paused"===this._state)return!0;if("active"===this._state){if(void 0===t)throw new Error("No channelData was received for the first input.");if(0===t.length)return!0;this._state="recording"}if("recording"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error("No channelData was received for the first input.");return 0===t.length?this._encoderPort.postMessage(Array.from({length:this._numberOfChannels},(()=>128))):(this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),this._numberOfChannels=t.length),!0}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:"The internal state does not allow to process the given message."},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state="stopped"}}e.parameterDescriptors=[],registerProcessor("recorder-audio-worklet-processor",e)})();',$o=xo(Blob,URL,jo),qo=Vo(Do,Wo(It),jn,Fo),an=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),cn=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),yt=(e,t)=>({startTime:t,type:"setValue",value:e}),$n=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),qn=(e,t,{startTime:n,target:r,timeConstant:o})=>r+(t-r)*Math.exp((n-e)/o),Ee=e=>e.type==="exponentialRampToValue",Ge=e=>e.type==="linearRampToValue",ie=e=>Ee(e)||Ge(e),St=e=>e.type==="setValue",ne=e=>e.type==="setValueCurve",ze=(e,t,n,r)=>{const o=e[t];return o===void 0?r:ie(o)||St(o)?o.value:ne(o)?o.values[o.values.length-1]:qn(n,ze(e,t-1,o.startTime,r),o)},un=(e,t,n,r,o)=>n===void 0?[r.insertTime,o]:ie(n)?[n.endTime,n.value]:St(n)?[n.startTime,n.value]:ne(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,ze(e,t-1,n.startTime,o)],bt=e=>e.type==="cancelAndHold",Et=e=>e.type==="cancelScheduledValues",se=e=>bt(e)||Et(e)?e.cancelTime:Ee(e)||Ge(e)?e.endTime:e.startTime,ln=(e,t,n,{endTime:r,value:o})=>n===o?o:0<n&&0<o||n<0&&o<0?n*(o/n)**((e-t)/(r-t)):0,dn=(e,t,n,{endTime:r,value:o})=>n+(e-t)/(r-t)*(o-n),Go=(e,t)=>{const n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},zo=(e,{duration:t,startTime:n,values:r})=>{const o=(e-n)/t*(r.length-1);return Go(r,o)},Ve=e=>e.type==="setTarget";class Ho{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=se(t);if(bt(t)||Et(t)){const r=this._automationEvents.findIndex(s=>Et(t)&&ne(s)?s.startTime+s.duration>=n:se(s)>=n),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),bt(t)){const s=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&ie(o)){if(s!==void 0&&Ve(s))throw new Error("The internal list is malformed.");const i=s===void 0?o.insertTime:ne(s)?s.startTime+s.duration:se(s),c=s===void 0?this._defaultValue:ne(s)?s.values[s.values.length-1]:s.value,a=Ee(o)?ln(n,i,c,o):dn(n,i,c,o),u=Ee(o)?an(a,n,this._currenTime):cn(a,n,this._currenTime);this._automationEvents.push(u)}if(s!==void 0&&Ve(s)&&this._automationEvents.push(yt(this.getValue(n),n)),s!==void 0&&ne(s)&&s.startTime+s.duration>n){const i=n-s.startTime,c=(s.values.length-1)/s.duration,a=Math.max(2,1+Math.ceil(i*c)),u=i/(a-1)*c,d=s.values.slice(0,a);if(u<1)for(let l=1;l<a;l+=1){const m=u*l%1;d[l]=s.values[l-1]*(1-m)+s.values[l]*m}this._automationEvents[this._automationEvents.length-1]=$n(d,s.startTime,i)}}}else{const r=this._automationEvents.findIndex(i=>se(i)>n),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&ne(o)&&se(o)+o.duration>n)return!1;const s=Ee(t)?an(t.value,t.endTime,this._currenTime):Ge(t)?cn(t.value,n,this._currenTime):t;if(r===-1)this._automationEvents.push(s);else{if(ne(t)&&n+t.duration>se(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(t){const n=this._automationEvents.findIndex(r=>se(r)>t);if(n>1){const r=this._automationEvents.slice(n-1),o=r[0];Ve(o)&&r.unshift(yt(ze(this._automationEvents,n-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(i=>se(i)>t),r=this._automationEvents[n],o=(n===-1?this._automationEvents.length:n)-1,s=this._automationEvents[o];if(s!==void 0&&Ve(s)&&(r===void 0||!ie(r)||r.insertTime>t))return qn(t,ze(this._automationEvents,o-1,s.startTime,this._defaultValue),s);if(s!==void 0&&St(s)&&(r===void 0||!ie(r)))return s.value;if(s!==void 0&&ne(s)&&(r===void 0||!ie(r)||s.startTime+s.duration>t))return t<s.startTime+s.duration?zo(t,s):s.values[s.values.length-1];if(s!==void 0&&ie(s)&&(r===void 0||!ie(r)))return s.value;if(r!==void 0&&Ee(r)){const[i,c]=un(this._automationEvents,o,s,r,this._defaultValue);return ln(t,i,c,r)}if(r!==void 0&&Ge(r)){const[i,c]=un(this._automationEvents,o,s,r,this._defaultValue);return dn(t,i,c,r)}return this._defaultValue}}const Xo=e=>({cancelTime:e,type:"cancelAndHold"}),Yo=e=>({cancelTime:e,type:"cancelScheduledValues"}),Zo=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),Ko=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),Qo=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),Jo=()=>new DOMException("","AbortError"),es=e=>(t,n,[r,o,s],i)=>{e(t[o],[n,r,s],c=>c[0]===n&&c[1]===r,i)},ts=e=>(t,n,r)=>{const o=[];for(let s=0;s<r.numberOfInputs;s+=1)o.push(new Set);e.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},ns=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Te=new WeakSet,Gn=new WeakMap,zn=new WeakMap,Hn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,At=new WeakMap,Ct=new WeakMap,Tt=new WeakMap,Kn={construct(){return Kn}},rs=e=>{try{const t=new Proxy(e,Kn);new t}catch{return!1}return!0},fn=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,hn=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(fn);for(;o!==null;){const s=o[1].slice(1,-1),i=o[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,t).toString());n.push(i),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(fn)}return[n.join(";"),r]},pn=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},mn=e=>{if(!rs(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},os=(e,t,n,r,o,s,i,c,a,u,d,l,m)=>{let w=0;return(p,f,g={credentials:"omit"})=>{const h=d.get(p);if(h!==void 0&&h.has(f))return Promise.resolve();const v=u.get(p);if(v!==void 0){const b=v.get(f);if(b!==void 0)return b}const _=s(p),T=_.audioWorklet===void 0?o(f).then(([b,A])=>{const[E,y]=hn(b,A),M=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${y}
})})(window,'_AWGS')`;return n(M)}).then(()=>{const b=m._AWGS.pop();if(b===void 0)throw new SyntaxError;r(_.currentTime,_.sampleRate,()=>b(class{},void 0,(A,E)=>{if(A.trim()==="")throw t();const y=Ct.get(_);if(y!==void 0){if(y.has(A))throw t();mn(E),pn(E.parameterDescriptors),y.set(A,E)}else mn(E),pn(E.parameterDescriptors),Ct.set(_,new Map([[A,E]]))},_.sampleRate,void 0,void 0))}):Promise.all([o(f),Promise.resolve(e(l,l))]).then(([[b,A],E])=>{const y=w+1;w=y;const[M,R]=hn(b,A),U=`${M};((AudioWorkletProcessor,registerProcessor)=>{${R}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${y}',class extends AudioWorkletProcessor{process(){return !1}})`,x=new Blob([U],{type:"application/javascript; charset=utf-8"}),I=URL.createObjectURL(x);return _.audioWorklet.addModule(I,g).then(()=>{if(c(_))return _;const B=i(_);return B.audioWorklet.addModule(I,g).then(()=>B)}).then(B=>{if(a===null)throw new SyntaxError;try{new a(B,`__sac${y}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(I))});return v===void 0?u.set(p,new Map([[f,T]])):v.set(f,T),T.then(()=>{const b=d.get(p);b===void 0?d.set(p,new Set([f])):b.add(f)}).finally(()=>{const b=u.get(p);b!==void 0&&b.delete(f)}),T}},ee=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},et=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return e.delete(r),r},Qn=(e,t,n,r)=>{const o=ee(e,t),s=et(o,i=>i[0]===n&&i[1]===r);return o.size===0&&e.delete(t),s},Pe=e=>ee(Zn,e),He=e=>{if(Te.has(e))throw new Error("The AudioNode is already stored.");Te.add(e),Pe(e).forEach(t=>t(!0))},Jn=e=>"port"in e,Lt=e=>{if(!Te.has(e))throw new Error("The AudioNode is not stored.");Te.delete(e),Pe(e).forEach(t=>t(!1))},Mt=(e,t)=>{!Jn(e)&&t.every(n=>n.size===0)&&Lt(e)},ss=(e,t,n,r,o,s,i,c,a,u,d,l,m)=>{const w=new WeakMap;return(p,f,g,h,v)=>{const{activeInputs:_,passiveInputs:T}=s(f),{outputs:b}=s(p),A=c(p),E=y=>{const M=a(f),R=a(p);if(y){const N=Qn(T,p,g,h);e(_,p,N,!1),!v&&!l(p)&&n(R,M,g,h),m(f)&&He(f)}else{const N=r(_,p,g,h);t(T,h,N,!1),!v&&!l(p)&&o(R,M,g,h);const L=i(f);if(L===0)d(f)&&Mt(f,_);else{const P=w.get(f);P!==void 0&&clearTimeout(P),w.set(f,setTimeout(()=>{d(f)&&Mt(f,_)},L*1e3))}}};return u(b,[f,g,h],y=>y[0]===f&&y[1]===g&&y[2]===h,!0)?(A.add(E),d(p)?e(_,p,[g,h,E],!0):t(T,h,[p,g,E],!0),!0):!1}},is=e=>(t,n,[r,o,s],i)=>{const c=t.get(r);c===void 0?t.set(r,new Set([[o,n,s]])):e(c,[o,n,s],a=>a[0]===o&&a[1]===n,i)},as=e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)},cs=e=>(t,n)=>{e(t).add(n)},er=(e,t)=>e.context===t,gn=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},pe=()=>new DOMException("","IndexSizeError"),us=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(r){throw r.code===12?pe():r}})(e.getChannelData)},ls={numberOfChannels:1},ds=(e,t,n,r,o,s,i,c)=>{let a=null;return class tr{constructor(d){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:m,sampleRate:w}={...ls,...d};a===null&&(a=new o(1,1,44100));const p=r!==null&&t(s,s)?new r({length:l,numberOfChannels:m,sampleRate:w}):a.createBuffer(m,l,w);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(i(p),us(p)):t(gn,()=>gn(p))||c(p),e.add(p),p}static[Symbol.hasInstance](d){return d!==null&&typeof d=="object"&&Object.getPrototypeOf(d)===tr.prototype||e.has(d)}}},tt=-34028234663852886e22,Pt=-tt,le=e=>Te.has(e),fs={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},hs=(e,t,n,r,o,s,i,c)=>class extends e{constructor(u,d){const l=s(u),m={...fs,...d},w=o(l,m),p=i(l),f=p?t():null;super(u,!1,w,f),this._audioBufferSourceNodeRenderer=f,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=w,this._onended=null,this._playbackRate=n(this,p,w.playbackRate,Pt,tt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const d=typeof u=="function"?c(this,u):null;this._nativeAudioBufferSourceNode.onended=d;const l=this._nativeAudioBufferSourceNode.onended;this._onended=l!==null&&l===d?u:l}get playbackRate(){return this._playbackRate}start(u=0,d=0,l){if(this._nativeAudioBufferSourceNode.start(u,d,l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=l===void 0?[u,d]:[u,d,l]),this.context.state!=="closed"){He(this);const m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),le(this)&&Lt(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},ps=(e,t,n,r,o)=>()=>{const s=new WeakMap;let i=null,c=null;const a=async(u,d)=>{let l=n(u);const m=er(l,d);if(!m){const w={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=t(d,w),i!==null&&l.start(...i),c!==null&&l.stop(c)}return s.set(d,l),m?await e(d,u.playbackRate,l.playbackRate):await r(d,u.playbackRate,l.playbackRate),await o(u,d,l),l};return{set start(u){i=u},set stop(u){c=u},render(u,d){const l=s.get(d);return l!==void 0?Promise.resolve(l):a(u,d)}}},ms=e=>"playbackRate"in e,gs=e=>"frequency"in e&&"gain"in e,ws=e=>"offset"in e,_s=e=>!("frequency"in e)&&"gain"in e,vs=e=>"detune"in e&&"frequency"in e,ys=e=>"pan"in e,X=e=>ee(Gn,e),Ue=e=>ee(Hn,e),Nt=(e,t)=>{const{activeInputs:n}=X(e);n.forEach(o=>o.forEach(([s])=>{t.includes(e)||Nt(s,[...t,e])}));const r=ms(e)?[e.playbackRate]:Jn(e)?Array.from(e.parameters.values()):gs(e)?[e.Q,e.detune,e.frequency,e.gain]:ws(e)?[e.offset]:_s(e)?[e.gain]:vs(e)?[e.detune,e.frequency]:ys(e)?[e.pan]:[];for(const o of r){const s=Ue(o);s!==void 0&&s.activeInputs.forEach(([i])=>Nt(i,t))}le(e)&&Lt(e)},bs=e=>{Nt(e.destination,[])},Es=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),As=(e,t,n,r,o,s,i,c)=>class extends e{constructor(u,d){const l=s(u),m=i(l),w=o(l,d,m),p=m?t(c):null;super(u,!1,w,p),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=w}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Cs=e=>{const t=new WeakMap,n=async(r,o)=>{const s=o.destination;return t.set(o,s),await e(r,o,s),s};return{render(r,o){const s=t.get(o);return s!==void 0?Promise.resolve(s):n(r,o)}}},Ts=(e,t,n,r,o,s,i,c)=>(a,u)=>{const d=u.listener,l=()=>{const b=new Float32Array(1),A=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=i(u);let y=!1,M=[0,0,-1,0,1,0],R=[0,0,0];const N=()=>{if(y)return;y=!0;const x=r(u,256,9,0);x.onaudioprocess=({inputBuffer:I})=>{const B=[s(I,b,0),s(I,b,1),s(I,b,2),s(I,b,3),s(I,b,4),s(I,b,5)];B.some((O,S)=>O!==M[S])&&(d.setOrientation(...B),M=B);const W=[s(I,b,6),s(I,b,7),s(I,b,8)];W.some((O,S)=>O!==R[S])&&(d.setPosition(...W),R=W)},A.connect(x)},L=x=>I=>{I!==M[x]&&(M[x]=I,d.setOrientation(...M))},P=x=>I=>{I!==R[x]&&(R[x]=I,d.setPosition(...R))},U=(x,I,B)=>{const W=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I});W.connect(A,0,x),W.start(),Object.defineProperty(W.offset,"defaultValue",{get(){return I}});const O=e({context:a},E,W.offset,Pt,tt);return c(O,"value",S=>()=>S.call(O),S=>V=>{try{S.call(O,V)}catch(q){if(q.code!==9)throw q}N(),E&&B(V)}),O.cancelAndHoldAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.linearRampToValueAtTime),O.setTargetAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.setTargetAtTime),O.setValueAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.setValueAtTime),O.setValueCurveAtTime=(S=>E?()=>{throw o()}:(...V)=>{const q=S.apply(O,V);return N(),q})(O.setValueCurveAtTime),O};return{forwardX:U(0,0,L(0)),forwardY:U(1,0,L(1)),forwardZ:U(2,-1,L(2)),positionX:U(6,0,P(0)),positionY:U(7,0,P(1)),positionZ:U(8,0,P(2)),upX:U(3,0,L(3)),upY:U(4,1,L(4)),upZ:U(5,0,L(5))}},{forwardX:m,forwardY:w,forwardZ:p,positionX:f,positionY:g,positionZ:h,upX:v,upY:_,upZ:T}=d.forwardX===void 0?l():d;return{get forwardX(){return m},get forwardY(){return w},get forwardZ(){return p},get positionX(){return f},get positionY(){return g},get positionZ(){return h},get upX(){return v},get upY(){return _},get upZ(){return T}}},Xe=e=>"context"in e,Be=e=>Xe(e[0]),me=(e,t,n,r)=>{for(const o of e)if(n(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},wn=(e,t,[n,r],o)=>{me(e,[t,n,r],s=>s[0]===t&&s[1]===n,o)},_n=(e,[t,n,r],o)=>{const s=e.get(t);s===void 0?e.set(t,new Set([[n,r]])):me(s,[n,r],i=>i[0]===n,o)},nr=e=>"inputs"in e,Ot=(e,t,n,r)=>{if(nr(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},rr=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},Ms=(e,t,n)=>et(e,r=>r[0]===t&&r[1]===n),or=(e,t)=>{if(!Pe(e).delete(t))throw new Error("Missing the expected event listener.")},sr=(e,t,n)=>{const r=ee(e,t),o=et(r,s=>s[0]===n);return r.size===0&&e.delete(t),o},kt=(e,t,n,r)=>{nr(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},Q=e=>ee(zn,e),Se=e=>ee(Xn,e),de=e=>At.has(e),$e=e=>!Te.has(e),vn=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const r=e.createScriptProcessor(256,1,1),o=e.createGain(),s=e.createBuffer(1,2,44100),i=s.getChannelData(0);i[0]=1,i[1]=1;const c=e.createBufferSource();c.buffer=s,c.loop=!0,c.connect(r).connect(e.destination),c.connect(o),c.disconnect(o),r.onaudioprocess=a=>{const u=a.inputBuffer.getChannelData(0);Array.prototype.some.call(u,d=>d===1)?n(!0):n(!1),c.stop(),r.onaudioprocess=null,c.disconnect(r),r.disconnect(e.destination)},c.start()}}),ht=(e,t)=>{const n=new Map;for(const r of e)for(const o of r){const s=n.get(o);n.set(o,s===void 0?1:s+1)}n.forEach((r,o)=>t(o,r))},Ye=e=>"context"in e,Ns=e=>{const t=new Map;e.connect=(n=>(r,o=0,s=0)=>{const i=Ye(r)?n(r,o,s):n(r,o),c=t.get(r);return c===void 0?t.set(r,[{input:s,output:o}]):c.every(a=>a.input!==s||a.output!==o)&&c.push({input:s,output:o}),i})(e.connect.bind(e)),e.disconnect=(n=>(r,o,s)=>{if(n.apply(e),r===void 0)t.clear();else if(typeof r=="number")for(const[i,c]of t){const a=c.filter(u=>u.output!==r);a.length===0?t.delete(i):t.set(i,a)}else if(t.has(r))if(o===void 0)t.delete(r);else{const i=t.get(r);if(i!==void 0){const c=i.filter(a=>a.output!==o&&(a.input!==s||s===void 0));c.length===0?t.delete(r):t.set(r,c)}}for(const[i,c]of t)c.forEach(a=>{Ye(i)?e.connect(i,a.output,a.input):e.connect(i,a.output)})})(e.disconnect)},Os=(e,t,n,r)=>{const{activeInputs:o,passiveInputs:s}=Ue(t),{outputs:i}=X(e),c=Pe(e),a=u=>{const d=Q(e),l=Se(t);if(u){const m=sr(s,e,n);wn(o,e,m,!1),!r&&!de(e)&&d.connect(l,n)}else{const m=Ms(o,e,n);_n(s,m,!1),!r&&!de(e)&&d.disconnect(l,n)}};return me(i,[t,n],u=>u[0]===t&&u[1]===n,!0)?(c.add(a),le(e)?wn(o,e,[n,a],!0):_n(s,[e,n,a],!0),!0):!1},ks=(e,t,n,r)=>{const{activeInputs:o,passiveInputs:s}=X(t),i=rr(o[r],e,n);return i===null?[Qn(s,e,n,r)[2],!1]:[i[2],!0]},Is=(e,t,n)=>{const{activeInputs:r,passiveInputs:o}=Ue(t),s=rr(r,e,n);return s===null?[sr(o,e,n)[1],!1]:[s[2],!0]},Ut=(e,t,n,r,o)=>{const[s,i]=ks(e,n,r,o);if(s!==null&&(or(e,s),i&&!t&&!de(e)&&kt(Q(e),Q(n),r,o)),le(n)){const{activeInputs:c}=X(n);Mt(n,c)}},Bt=(e,t,n,r)=>{const[o,s]=Is(e,n,r);o!==null&&(or(e,o),s&&!t&&!de(e)&&Q(e).disconnect(Se(n),r))},Rs=(e,t)=>{const n=X(e),r=[];for(const o of n.outputs)Be(o)?Ut(e,t,...o):Bt(e,t,...o),r.push(o[0]);return n.outputs.clear(),r},Ss=(e,t,n)=>{const r=X(e),o=[];for(const s of r.outputs)s[1]===n&&(Be(s)?Ut(e,t,...s):Bt(e,t,...s),o.push(s[0]),r.outputs.delete(s));return o},Ls=(e,t,n,r,o)=>{const s=X(e);return Array.from(s.outputs).filter(i=>i[0]===n&&(r===void 0||i[1]===r)&&(o===void 0||i[2]===o)).map(i=>(Be(i)?Ut(e,t,...i):Bt(e,t,...i),s.outputs.delete(i),i[0]))},Ps=(e,t,n,r,o,s,i,c,a,u,d,l,m,w,p,f)=>class extends u{constructor(h,v,_,T){super(_),this._context=h,this._nativeAudioNode=_;const b=d(h);l(b)&&n(vn,()=>vn(b,f))!==!0&&Ns(_),zn.set(this,_),Zn.set(this,new Set),h.state!=="closed"&&v&&He(this),e(this,T,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(h){this._nativeAudioNode.channelCount=h}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(h){this._nativeAudioNode.channelCountMode=h}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(h){this._nativeAudioNode.channelInterpretation=h}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(h,v=0,_=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw o();const T=d(this._context),b=p(T);if(m(h)||w(h))throw s();if(Xe(h)){const y=Q(h);try{const R=Ot(this._nativeAudioNode,y,v,_),N=$e(this);(b||N)&&this._nativeAudioNode.disconnect(...R),this.context.state!=="closed"&&!N&&$e(h)&&He(h)}catch(R){throw R.code===12?s():R}if(t(this,h,v,_,b)){const R=a([this],h);ht(R,r(b))}return h}const A=Se(h);if(A.name==="playbackRate"&&A.maxValue===1024)throw i();try{this._nativeAudioNode.connect(A,v),(b||$e(this))&&this._nativeAudioNode.disconnect(A,v)}catch(y){throw y.code===12?s():y}if(Os(this,h,v,b)){const y=a([this],h);ht(y,r(b))}}disconnect(h,v,_){let T;const b=d(this._context),A=p(b);if(h===void 0)T=Rs(this,A);else if(typeof h=="number"){if(h<0||h>=this.numberOfOutputs)throw o();T=Ss(this,A,h)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Xe(h)&&_!==void 0&&(_<0||_>=h.numberOfInputs))throw o();if(T=Ls(this,A,h,v,_),T.length===0)throw s()}for(const E of T){const y=a([this],E);ht(y,c)}}},Us=(e,t,n,r,o,s,i,c,a,u,d,l,m)=>(w,p,f,g=null,h=null)=>{const v=f.value,_=new Ho(v),T=p?r(_):null,b={get defaultValue(){return v},get maxValue(){return g===null?f.maxValue:g},get minValue(){return h===null?f.minValue:h},get value(){return f.value},set value(A){f.value=A,b.setValueAtTime(A,w.context.currentTime)},cancelAndHoldAtTime(A){if(typeof f.cancelAndHoldAtTime=="function")T===null&&_.flush(w.context.currentTime),_.add(o(A)),f.cancelAndHoldAtTime(A);else{const E=Array.from(_).pop();T===null&&_.flush(w.context.currentTime),_.add(o(A));const y=Array.from(_).pop();f.cancelScheduledValues(A),E!==y&&y!==void 0&&(y.type==="exponentialRampToValue"?f.exponentialRampToValueAtTime(y.value,y.endTime):y.type==="linearRampToValue"?f.linearRampToValueAtTime(y.value,y.endTime):y.type==="setValue"?f.setValueAtTime(y.value,y.startTime):y.type==="setValueCurve"&&f.setValueCurveAtTime(y.values,y.startTime,y.duration))}return b},cancelScheduledValues(A){return T===null&&_.flush(w.context.currentTime),_.add(s(A)),f.cancelScheduledValues(A),b},exponentialRampToValueAtTime(A,E){if(A===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const y=w.context.currentTime;return T===null&&_.flush(y),Array.from(_).length===0&&(_.add(u(v,y)),f.setValueAtTime(v,y)),_.add(i(A,E)),f.exponentialRampToValueAtTime(A,E),b},linearRampToValueAtTime(A,E){const y=w.context.currentTime;return T===null&&_.flush(y),Array.from(_).length===0&&(_.add(u(v,y)),f.setValueAtTime(v,y)),_.add(c(A,E)),f.linearRampToValueAtTime(A,E),b},setTargetAtTime(A,E,y){return T===null&&_.flush(w.context.currentTime),_.add(a(A,E,y)),f.setTargetAtTime(A,E,y),b},setValueAtTime(A,E){return T===null&&_.flush(w.context.currentTime),_.add(u(A,E)),f.setValueAtTime(A,E),b},setValueCurveAtTime(A,E,y){const M=A instanceof Float32Array?A:new Float32Array(A);if(l!==null&&l.name==="webkitAudioContext"){const R=E+y,N=w.context.sampleRate,L=Math.ceil(E*N),P=Math.floor(R*N),U=P-L,x=new Float32Array(U);for(let B=0;B<U;B+=1){const W=(M.length-1)/y*((L+B)/N-E),O=Math.floor(W),S=Math.ceil(W);x[B]=O===S?M[O]:(1-(W-O))*M[O]+(1-(S-W))*M[S]}T===null&&_.flush(w.context.currentTime),_.add(d(x,E,y)),f.setValueCurveAtTime(x,E,y);const I=P/N;I<R&&m(b,x[x.length-1],I),m(b,M[M.length-1],R)}else T===null&&_.flush(w.context.currentTime),_.add(d(M,E,y)),f.setValueCurveAtTime(M,E,y);return b}};return n.set(b,f),t.set(b,w),e(b,T),b},Bs=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:r,value:o}=n;t.exponentialRampToValueAtTime(o,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:o}=n;t.linearRampToValueAtTime(o,r)}else if(n.type==="setTarget"){const{startTime:r,target:o,timeConstant:s}=n;t.setTargetAtTime(o,r,s)}else if(n.type==="setValue"){const{startTime:r,value:o}=n;t.setValueAtTime(o,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:o,values:s}=n;t.setValueCurveAtTime(s,o,r)}else throw new Error("Can't apply an unknown automation.")}});class ir{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((r,o)=>t.call(n,r,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const xs={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Ds=(e,t,n,r,o,s,i,c,a,u,d,l,m,w)=>class extends t{constructor(f,g,h){var v;const _=c(f),T=a(_),b=d({...xs,...h});m(b);const A=Ct.get(_),E=A==null?void 0:A.get(g),y=T||_.state!=="closed"?_:(v=i(_))!==null&&v!==void 0?v:_,M=o(y,T?null:f.baseLatency,u,g,E,b),R=T?r(g,b,E):null;super(f,!0,M,R);const N=[];M.parameters.forEach((P,U)=>{const x=n(this,T,P);N.push([U,x])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new ir(N),T&&e(_,this);const{activeInputs:L}=s(this);l(M,L)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(f){const g=typeof f=="function"?w(this,f):null;this._nativeAudioWorkletNode.onprocessorerror=g;const h=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=h!==null&&h===g?f:h}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Ze(e,t,n,r,o){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const s=e.getChannelData(r);if(t[n].byteLength===0)t[n]=s.slice(o,o+128);else{const i=new Float32Array(s.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(i)}}}const ar=(e,t,n,r,o)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],r,o):t[n].byteLength!==0&&e.getChannelData(r).set(t[n],o)},Ke=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const o=[],s=typeof t=="number"?t:t[r];for(let i=0;i<s;i+=1)o.push(new Float32Array(128));n.push(o)}return n},Ws=(e,t)=>{const n=ee(Tt,e),r=Q(t);return ee(n,r)},Vs=async(e,t,n,r,o,s,i)=>{const c=t===null?Math.ceil(e.context.length/128)*128:t.length,a=r.channelCount*r.numberOfInputs,u=o.reduce((g,h)=>g+h,0),d=u===0?null:n.createBuffer(u,c,n.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const l=X(e),m=await Ws(n,e),w=Ke(r.numberOfInputs,r.channelCount),p=Ke(r.numberOfOutputs,o),f=Array.from(e.parameters.keys()).reduce((g,h)=>({...g,[h]:new Float32Array(128)}),{});for(let g=0;g<c;g+=128){if(r.numberOfInputs>0&&t!==null)for(let h=0;h<r.numberOfInputs;h+=1)for(let v=0;v<r.channelCount;v+=1)Ze(t,w[h],v,v,g);s.parameterDescriptors!==void 0&&t!==null&&s.parameterDescriptors.forEach(({name:h},v)=>{Ze(t,f,h,a+v,g)});for(let h=0;h<r.numberOfInputs;h+=1)for(let v=0;v<o[h];v+=1)p[h][v].byteLength===0&&(p[h][v]=new Float32Array(128));try{const h=w.map((_,T)=>l.activeInputs[T].size===0?[]:_),v=i(g/n.sampleRate,n.sampleRate,()=>m.process(h,p,f));if(d!==null)for(let _=0,T=0;_<r.numberOfOutputs;_+=1){for(let b=0;b<o[_];b+=1)ar(d,p[_],b,T+b,g);T+=o[_]}if(!v)break}catch(h){e.dispatchEvent(new ErrorEvent("processorerror",{colno:h.colno,filename:h.filename,lineno:h.lineno,message:h.message}));break}}return d},Fs=(e,t,n,r,o,s,i,c,a,u,d,l,m,w,p,f)=>(g,h,v)=>{const _=new WeakMap;let T=null;const b=async(A,E)=>{let y=d(A),M=null;const R=er(y,E),N=Array.isArray(h.outputChannelCount)?h.outputChannelCount:Array.from(h.outputChannelCount);if(l===null){const L=N.reduce((I,B)=>I+B,0),P=o(E,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),U=[];for(let I=0;I<A.numberOfOutputs;I+=1)U.push(r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[I]}));const x=i(E,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1});x.connect=t.bind(null,U),x.disconnect=a.bind(null,U),M=[P,U,x]}else R||(y=new l(E,g));if(_.set(E,M===null?y:M[2]),M!==null){if(T===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=A.channelCount*A.numberOfInputs,W=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,O=B+W;T=Vs(A,O===0?null:await(async()=>{const V=new m(O,Math.ceil(A.context.length/128)*128,E.sampleRate),q=[],we=[];for(let j=0;j<h.numberOfInputs;j+=1)q.push(i(V,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1})),we.push(o(V,{channelCount:h.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:h.channelCount}));const _e=await Promise.all(Array.from(A.parameters.values()).map(async j=>{const Z=s(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:j.value});return await w(V,j,Z.offset),Z})),ve=r(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,B+W)});for(let j=0;j<h.numberOfInputs;j+=1){q[j].connect(we[j]);for(let Z=0;Z<h.channelCount;Z+=1)we[j].connect(ve,Z,j*h.channelCount+Z)}for(const[j,Z]of _e.entries())Z.connect(ve,0,B+j),Z.start(0);return ve.connect(V.destination),await Promise.all(q.map(j=>p(A,V,j))),f(V)})(),E,h,N,v,u)}const L=await T,P=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[U,x,I]=M;L!==null&&(P.buffer=L,P.start(0)),P.connect(U);for(let B=0,W=0;B<A.numberOfOutputs;B+=1){const O=x[B];for(let S=0;S<N[B];S+=1)U.connect(O,W+S,S);W+=N[B]}return I}if(R)for(const[L,P]of A.parameters.entries())await e(E,P,y.parameters.get(L));else for(const[L,P]of A.parameters.entries())await w(E,P,y.parameters.get(L));return await p(A,E,y),y};return{render(A,E){c(E,A);const y=_.get(E);return y!==void 0?Promise.resolve(y):b(A,E)}}},js=(e,t)=>(n,r)=>{const o=t.get(n);if(o!==void 0)return o;const s=e.get(n);if(s!==void 0)return s;try{const i=r();return i instanceof Promise?(e.set(n,i),i.catch(()=>!1).then(c=>(e.delete(n),t.set(n,c),c))):(t.set(n,i),i)}catch{return t.set(n,!1),!1}},$s=e=>(t,n,r)=>e(n,t,r),qs=e=>(t,n,r=0,o=0)=>{const s=t[r];if(s===void 0)throw e();return Ye(n)?s.connect(n,0,o):s.connect(n,0)},Gs=e=>t=>(e[0]=t,e[0]),zs=(e,t,n,r,o,s,i,c)=>(a,u)=>{const d=t.get(a);if(d===void 0)throw new Error("Missing the expected cycle count.");const l=s(a.context),m=c(l);if(d===u){if(t.delete(a),!m&&i(a)){const w=r(a),{outputs:p}=n(a);for(const f of p)if(Be(f)){const g=r(f[0]);e(w,g,f[1],f[2])}else{const g=o(f[0]);w.connect(g,f[1])}}}else t.set(a,d-u)},Hs=e=>(t,n,r,o)=>e(t[o],s=>s[0]===n&&s[1]===r),Xs=e=>(t,n)=>{e(t).delete(n)},Ys=e=>"delayTime"in e,Zs=(e,t,n)=>function r(o,s){const i=Xe(s)?s:n(e,s);if(Ys(i))return[];if(o[0]===i)return[o];if(o.includes(i))return[];const{outputs:c}=t(i);return Array.from(c).map(a=>r([...o,i],a[0])).reduce((a,u)=>a.concat(u),[])},Fe=(e,t,n)=>{const r=t[n];if(r===void 0)throw e();return r},Ks=e=>(t,n=void 0,r=void 0,o=0)=>n===void 0?t.forEach(s=>s.disconnect()):typeof n=="number"?Fe(e,t,n).disconnect():Ye(n)?r===void 0?t.forEach(s=>s.disconnect(n)):o===void 0?Fe(e,t,r).disconnect(n,0):Fe(e,t,r).disconnect(n,0,o):r===void 0?t.forEach(s=>s.disconnect(n)):Fe(e,t,r).disconnect(n,0),Qs=e=>t=>new Promise((n,r)=>{if(e===null){r(new SyntaxError);return}const o=e.document.head;if(o===null)r(new SyntaxError);else{const s=e.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),c=URL.createObjectURL(i),a=e.onerror,u=()=>{e.onerror=a,URL.revokeObjectURL(c)};e.onerror=(d,l,m,w,p)=>{if(l===c||l===e.location.href&&m===1&&w===1)return u(),r(p),!1;if(a!==null)return a(d,l,m,w,p)},s.onerror=()=>{u(),r(new SyntaxError)},s.onload=()=>{u(),n()},s.src=c,s.type="module",o.appendChild(s)}}),Js=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,o){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=e(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(n,s,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,o){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,s===void 0?null:s,o)}},ei=e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return r()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},ti=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},ni=(e,t)=>n=>t(e,n),ri=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},oi=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},si=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},ii=e=>t=>e.get(t),J=()=>new DOMException("","InvalidStateError"),ai=e=>t=>{const n=e.get(t);if(n===void 0)throw J();return n},ci=(e,t)=>n=>{let r=e.get(n);if(r!==void 0)return r;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r},ui=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},li=()=>new DOMException("","InvalidAccessError"),di=(e,t,n,r,o,s)=>i=>(c,a)=>{const u=e.get(c);if(u===void 0){if(!i&&s(c)){const d=r(c),{outputs:l}=n(c);for(const m of l)if(Be(m)){const w=r(m[0]);t(d,w,m[1],m[2])}else{const w=o(m[0]);d.disconnect(w,m[1])}}e.set(c,a)}else e.set(c,u+a)},fi=e=>t=>e!==null&&t instanceof e,hi=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,pi=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,mi=e=>t=>e!==null&&t instanceof e,gi=e=>e!==null&&e.isSecureContext,wi=(e,t,n,r)=>class extends e{constructor(s,i){const c=n(s),a=t(c,i);if(r(c))throw new TypeError;super(s,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},_i=(e,t,n,r,o)=>class extends r{constructor(i={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let c;try{c=new o(i)}catch(d){throw d.code===12&&d.message==="sampleRate is not in range"?t():d}if(c===null)throw n();if(!Es(i.latencyHint))throw new TypeError(`The provided value '${i.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(i.sampleRate!==void 0&&c.sampleRate!==i.sampleRate)throw t();super(c,2);const{latencyHint:a}=i,{sampleRate:u}=c;if(this._baseLatency=typeof c.baseLatency=="number"?c.baseLatency:a==="balanced"?512/u:a==="interactive"||a===void 0?256/u:a==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(a*u/128)))*128/u,this._nativeAudioContext=c,o.name==="webkitAudioContext"?(this._nativeGainNode=c.createGain(),this._nativeOscillatorNode=c.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(c.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,c.state==="running"){this._state="suspended";const d=()=>{this._state==="suspended"&&(this._state=null),c.removeEventListener("statechange",d)};c.addEventListener("statechange",d)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),bs(this)}))}resume(){return this._state==="suspended"?new Promise((i,c)=>{const a=()=>{this._nativeAudioContext.removeEventListener("statechange",a),this._nativeAudioContext.state==="running"?i():this.resume().then(i,c)};this._nativeAudioContext.addEventListener("statechange",a)}):this._nativeAudioContext.resume().catch(i=>{throw i===void 0||i.code===15?e():i})}suspend(){return this._nativeAudioContext.suspend().catch(i=>{throw i===void 0?e():i})}},vi=(e,t,n,r,o,s)=>class extends n{constructor(c,a){super(c),this._nativeContext=c,Yn.set(this,c),r(c)&&o.set(c,new Set),this._destination=new e(this,a),this._listener=t(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const a=typeof c=="function"?s(this,c):null;this._nativeContext.onstatechange=a;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===a?c:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},yn=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},yi=(e,t)=>(n,r,o)=>{const s=new Set;return n.connect=(i=>(c,a=0,u=0)=>{const d=s.size===0;if(t(c))return i.call(n,c,a,u),e(s,[c,a,u],l=>l[0]===c&&l[1]===a&&l[2]===u,!0),d&&r(),c;i.call(n,c,a),e(s,[c,a],l=>l[0]===c&&l[1]===a,!0),d&&r()})(n.connect),n.disconnect=(i=>(c,a,u)=>{const d=s.size>0;if(c===void 0)i.apply(n),s.clear();else if(typeof c=="number"){i.call(n,c);for(const m of s)m[1]===c&&s.delete(m)}else{t(c)?i.call(n,c,a,u):i.call(n,c,a);for(const m of s)m[0]===c&&(a===void 0||m[1]===a)&&(u===void 0||m[2]===u)&&s.delete(m)}const l=s.size===0;d&&l&&o()})(n.disconnect),n},ue=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n]&&(e[n]=r)},xe=(e,t)=>{ue(e,t,"channelCount"),ue(e,t,"channelCountMode"),ue(e,t,"channelInterpretation")},bi=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,xt=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n].value&&(e[n].value=r)},Ei=e=>{e.start=(t=>{let n=!1;return(r=0,o=0,s)=>{if(n)throw J();t.call(e,r,o,s),n=!0}})(e.start)},cr=e=>{e.start=(t=>(n=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})(e.start)},ur=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},Ai=(e,t,n,r,o,s,i,c,a,u,d)=>(l,m)=>{const w=l.createBufferSource();return xe(w,m),xt(w,m,"playbackRate"),ue(w,m,"buffer"),ue(w,m,"loop"),ue(w,m,"loopEnd"),ue(w,m,"loopStart"),t(n,()=>n(l))||Ei(w),t(r,()=>r(l))||a(w),t(o,()=>o(l))||u(w,l),t(s,()=>s(l))||cr(w),t(i,()=>i(l))||d(w,l),t(c,()=>c(l))||ur(w),e(l,w),w},Ci=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,Ti=(e,t)=>(n,r,o)=>{const s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}o&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const i=e(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return t(i,"channelCount",c=>()=>c.call(i),c=>a=>{c.call(i,a);try{s.channelCount=a}catch(u){if(a>s.maxChannelCount)throw u}}),t(i,"channelCountMode",c=>()=>c.call(i),c=>a=>{c.call(i,a),s.channelCountMode=a}),t(i,"channelInterpretation",c=>()=>c.call(i),c=>a=>{c.call(i,a),s.channelInterpretation=a}),Object.defineProperty(i,"maxChannelCount",{get:()=>s.maxChannelCount}),i.connect(s),i},Mi=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,Ni=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},Oi=(e,t,n,r,o)=>(s,i,c,a,u,d)=>{if(c!==null)try{const l=new c(s,a,d),m=new Map;let w=null;if(Object.defineProperties(l,{channelCount:{get:()=>d.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>w,set:p=>{typeof w=="function"&&l.removeEventListener("processorerror",w),w=typeof p=="function"?p:null,typeof w=="function"&&l.addEventListener("processorerror",w)}}}),l.addEventListener=(p=>(...f)=>{if(f[0]==="processorerror"){const g=typeof f[1]=="function"?f[1]:typeof f[1]=="object"&&f[1]!==null&&typeof f[1].handleEvent=="function"?f[1].handleEvent:null;if(g!==null){const h=m.get(f[1]);h!==void 0?f[1]=h:(f[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),g(v)):g(new ErrorEvent(f[0],{...v}))},m.set(g,f[1]))}}return p.call(l,"error",f[1],f[2]),p.call(l,...f)})(l.addEventListener),l.removeEventListener=(p=>(...f)=>{if(f[0]==="processorerror"){const g=m.get(f[1]);g!==void 0&&(m.delete(f[1]),f[1]=g)}return p.call(l,"error",f[1],f[2]),p.call(l,f[0],f[1],f[2])})(l.removeEventListener),d.numberOfOutputs!==0){const p=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return l.connect(p).connect(s.destination),o(l,()=>p.disconnect(),()=>p.connect(s.destination))}return l}catch(l){throw l.code===11?r():l}if(u===void 0)throw r();return Ni(d),t(s,i,u,d)},ki=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ii=e=>new Promise((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),o.close(),t(s)},r.onmessageerror=({data:s})=>{r.close(),o.close(),n(s)},o.postMessage(e)}),Ri=async(e,t)=>{const n=await Ii(t);return new e(n)},Si=(e,t,n,r)=>{let o=Tt.get(e);o===void 0&&(o=new WeakMap,Tt.set(e,o));const s=Ri(n,r);return o.set(t,s),s},Li=(e,t,n,r,o,s,i,c,a,u,d,l,m)=>(w,p,f,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw a();const h=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(h.some(C=>C<1))throw a();if(h.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw a();const v=g.channelCount*g.numberOfInputs,_=h.reduce((C,k)=>C+k,0),T=f.parameterDescriptors===void 0?0:f.parameterDescriptors.length;if(v+T>6||_>6)throw a();const b=new MessageChannel,A=[],E=[];for(let C=0;C<g.numberOfInputs;C+=1)A.push(i(w,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),E.push(o(w,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const y=[];if(f.parameterDescriptors!==void 0)for(const{defaultValue:C,maxValue:k,minValue:G,name:F}of f.parameterDescriptors){const D=s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[F]!==void 0?g.parameterData[F]:C===void 0?0:C});Object.defineProperties(D.offset,{defaultValue:{get:()=>C===void 0?0:C},maxValue:{get:()=>k===void 0?Pt:k},minValue:{get:()=>G===void 0?tt:G}}),y.push(D)}const M=r(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+T)}),R=ki(p,w.sampleRate),N=c(w,R,v+T,Math.max(1,_)),L=o(w,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),P=[];for(let C=0;C<g.numberOfOutputs;C+=1)P.push(r(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:h[C]}));for(let C=0;C<g.numberOfInputs;C+=1){A[C].connect(E[C]);for(let k=0;k<g.channelCount;k+=1)E[C].connect(M,k,C*g.channelCount+k)}const U=new ir(f.parameterDescriptors===void 0?[]:f.parameterDescriptors.map(({name:C},k)=>{const G=y[k];return G.connect(M,0,v+k),G.start(0),[C,G.offset]}));M.connect(N);let x=g.channelInterpretation,I=null;const B=g.numberOfOutputs===0?[N]:P,W={get bufferSize(){return R},get channelCount(){return g.channelCount},set channelCount(C){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(C){throw n()},get channelInterpretation(){return x},set channelInterpretation(C){for(const k of A)k.channelInterpretation=C;x=C},get context(){return N.context},get inputs(){return A},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror(C){typeof I=="function"&&W.removeEventListener("processorerror",I),I=typeof C=="function"?C:null,typeof I=="function"&&W.addEventListener("processorerror",I)},get parameters(){return U},get port(){return b.port2},addEventListener(...C){return N.addEventListener(C[0],C[1],C[2])},connect:e.bind(null,B),disconnect:u.bind(null,B),dispatchEvent(...C){return N.dispatchEvent(C[0])},removeEventListener(...C){return N.removeEventListener(C[0],C[1],C[2])}},O=new Map;b.port1.addEventListener=(C=>(...k)=>{if(k[0]==="message"){const G=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(G!==null){const F=O.get(k[1]);F!==void 0?k[1]=F:(k[1]=D=>{d(w.currentTime,w.sampleRate,()=>G(D))},O.set(G,k[1]))}}return C.call(b.port1,k[0],k[1],k[2])})(b.port1.addEventListener),b.port1.removeEventListener=(C=>(...k)=>{if(k[0]==="message"){const G=O.get(k[1]);G!==void 0&&(O.delete(k[1]),k[1]=G)}return C.call(b.port1,k[0],k[1],k[2])})(b.port1.removeEventListener);let S=null;Object.defineProperty(b.port1,"onmessage",{get:()=>S,set:C=>{typeof S=="function"&&b.port1.removeEventListener("message",S),S=typeof C=="function"?C:null,typeof S=="function"&&(b.port1.addEventListener("message",S),b.port1.start())}}),f.prototype.port=b.port1;let V=null;Si(w,W,f,g).then(C=>V=C);const we=Ke(g.numberOfInputs,g.channelCount),_e=Ke(g.numberOfOutputs,h),ve=f.parameterDescriptors===void 0?[]:f.parameterDescriptors.reduce((C,{name:k})=>({...C,[k]:new Float32Array(128)}),{});let j=!0;const Z=()=>{g.numberOfOutputs>0&&N.disconnect(L);for(let C=0,k=0;C<g.numberOfOutputs;C+=1){const G=P[C];for(let F=0;F<h[C];F+=1)L.disconnect(G,k+F,F);k+=h[C]}},De=new Map;N.onaudioprocess=({inputBuffer:C,outputBuffer:k})=>{if(V!==null){const G=l(W);for(let F=0;F<R;F+=128){for(let D=0;D<g.numberOfInputs;D+=1)for(let $=0;$<g.channelCount;$+=1)Ze(C,we[D],$,$,F);f.parameterDescriptors!==void 0&&f.parameterDescriptors.forEach(({name:D},$)=>{Ze(C,ve,D,v+$,F)});for(let D=0;D<g.numberOfInputs;D+=1)for(let $=0;$<h[D];$+=1)_e[D][$].byteLength===0&&(_e[D][$]=new Float32Array(128));try{const D=we.map((K,oe)=>{if(G[oe].size>0)return De.set(oe,R/128),K;const ut=De.get(oe);return ut===void 0?[]:(K.every(xr=>xr.every(Dr=>Dr===0))&&(ut===1?De.delete(oe):De.set(oe,ut-1)),K)});j=d(w.currentTime+F/w.sampleRate,w.sampleRate,()=>V.process(D,_e,ve));for(let K=0,oe=0;K<g.numberOfOutputs;K+=1){for(let ke=0;ke<h[K];ke+=1)ar(k,_e[K],ke,oe+ke,F);oe+=h[K]}}catch(D){j=!1,W.dispatchEvent(new ErrorEvent("processorerror",{colno:D.colno,filename:D.filename,lineno:D.lineno,message:D.message}))}if(!j){for(let D=0;D<g.numberOfInputs;D+=1){A[D].disconnect(E[D]);for(let $=0;$<g.channelCount;$+=1)E[F].disconnect(M,$,D*g.channelCount+$)}if(f.parameterDescriptors!==void 0){const D=f.parameterDescriptors.length;for(let $=0;$<D;$+=1){const K=y[$];K.disconnect(M,0,v+$),K.stop()}}M.disconnect(N),N.onaudioprocess=null,at?Z():Yt();break}}}};let at=!1;const ct=i(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Xt=()=>N.connect(ct).connect(w.destination),Yt=()=>{N.disconnect(ct),ct.disconnect()},Ur=()=>{if(j){Yt(),g.numberOfOutputs>0&&N.connect(L);for(let C=0,k=0;C<g.numberOfOutputs;C+=1){const G=P[C];for(let F=0;F<h[C];F+=1)L.connect(G,k+F,F);k+=h[C]}}at=!0},Br=()=>{j&&(Xt(),Z()),at=!1};return Xt(),m(W,Ur,Br)},Pi=(e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,o),xe(o,r),o},Ui=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw J()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw J()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw J()}})},lr=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return xe(n,t),Ui(n),n},Bi=(e,t,n,r,o)=>(s,i)=>{if(s.createConstantSource===void 0)return n(s,i);const c=s.createConstantSource();return xe(c,i),xt(c,i,"offset"),t(r,()=>r(s))||cr(c),t(o,()=>o(s))||ur(c),e(s,c),c},dr=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),xi=(e,t,n,r)=>(o,{offset:s,...i})=>{const c=o.createBuffer(1,2,44100),a=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(o,{...i,gain:s}),d=c.getChannelData(0);d[0]=1,d[1]=1,a.buffer=c,a.loop=!0;const l={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return a.onended},set onended(p){a.onended=p},addEventListener(...p){return a.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return a.dispatchEvent(p[0])},removeEventListener(...p){return a.removeEventListener(p[0],p[1],p[2])},start(p=0){a.start.call(a,p)},stop(p=0){a.stop.call(a,p)}},m=()=>a.connect(u),w=()=>a.disconnect(u);return e(o,a),r(dr(l,u),m,w)},ae=(e,t)=>{const n=e.createGain();return xe(n,t),xt(n,t,"gain"),n},Di=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((s,i)=>s.id<i.id?-1:s.id>i.id?1:0);const r=n.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:t}),o},Wi=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,Dt=(e,t,n,r)=>e.createScriptProcessor(t,n,r),ge=()=>new DOMException("","NotSupportedError"),Vi=(e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)),Fi=(e,t,n)=>async(r,o,s)=>{const i=e(r);await Promise.all(i.activeInputs.map((c,a)=>Array.from(c).map(async([u,d])=>{const m=await t(u).render(u,o),w=r.context.destination;!n(u)&&(r!==w||!n(r))&&m.connect(s,d,a)})).reduce((c,a)=>[...c,...a],[]))},ji=(e,t,n)=>async(r,o,s)=>{const i=t(r);await Promise.all(Array.from(i.activeInputs).map(async([c,a])=>{const d=await e(c).render(c,o);n(c)||d.connect(s,a)}))},$i=(e,t,n,r)=>o=>e(yn,()=>yn(o))?Promise.resolve(e(r,r)).then(s=>{if(!s){const i=n(o,512,0,1);o.oncomplete=()=>{i.onaudioprocess=null,i.disconnect()},i.onaudioprocess=()=>o.currentTime,i.connect(o.destination)}return o.startRendering()}):new Promise(s=>{const i=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=c=>{i.disconnect(),s(c.renderedBuffer)},i.connect(o.destination),o.startRendering()}),qi=e=>(t,n)=>{e.set(t,n)},Gi=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},zi=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let s=!1,i=!1;try{await r.audioWorklet.addModule(o);const c=new e(r,"a",{numberOfOutputs:0}),a=r.createOscillator();c.port.onmessage=()=>s=!0,c.onprocessorerror=()=>i=!0,a.connect(c),a.start(0),await r.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(o)}return s&&!i},Hi=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{r.disconnect(),o(n.currentTime!==0)},n.startRendering()})},Xi=()=>new DOMException("","UnknownError"),Yi=()=>typeof window>"u"?null:window,Zi=(e,t)=>n=>{n.copyFromChannel=(r,o,s=0)=>{const i=e(s),c=e(o);if(c>=n.numberOfChannels)throw t();const a=n.length,u=n.getChannelData(c),d=r.length;for(let l=i<0?-i:0;l+i<a&&l<d;l+=1)r[l]=u[l+i]},n.copyToChannel=(r,o,s=0)=>{const i=e(s),c=e(o);if(c>=n.numberOfChannels)throw t();const a=n.length,u=n.getChannelData(c),d=r.length;for(let l=i<0?-i:0;l+i<a&&l<d;l+=1)u[l+i]=r[l]}},Ki=e=>t=>{t.copyFromChannel=(n=>(r,o,s=0)=>{const i=e(s),c=e(o);if(i<t.length)return n.call(t,r,c,i)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,s=0)=>{const i=e(s),c=e(o);if(i<t.length)return n.call(t,r,c,i)})(t.copyToChannel)},Qi=e=>(t,n)=>{const r=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=r),e(t,"buffer",o=>()=>{const s=o.call(t);return s===r?null:s},o=>s=>o.call(t,s===null?r:s))},Ji=(e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,()=>{const c=r.numberOfInputs;for(let a=0;a<c;a+=1)o.connect(r,0,a)},()=>o.disconnect(r))},ea=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Wt=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:s,set:i}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(s),set:r(i)})},ta=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),fr=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(r.code!==9)throw r;fr(e,t,n+1e-7)}},na=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},ra=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},oa=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},hr=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},sa=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},pr=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},ia=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},aa=e=>{e.start=(t=>(n=0,r=0,o)=>{const s=e.buffer,i=s===null?r:Math.min(s.duration,r);s!==null&&i>s.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,i,o)})(e.start)},ca=(e,t)=>{const n=t.createGain();e.connect(n);const r=(o=>()=>{o.call(e,n),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),dr(e,n),e.stop=(o=>{let s=!1;return(i=0)=>{if(s)try{o.call(e,i)}catch{n.gain.setValueAtTime(0,i)}else o.call(e,i),s=!0}})(e.stop)},nt=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},ua=es(me),la=is(me),da=Hs(et),fa=new WeakMap,ha=oi(fa),Ne=js(new Map,new WeakMap),te=Yi(),mr=ri(X),Vt=Fi(X,mr,de),fe=ai(Yn),Oe=Wi(te),re=mi(Oe),gr=new WeakMap,wr=Js(nt),rt=Ci(te),pa=fi(rt),_r=hi(te),ma=pi(te),Le=Mi(te),ot=Ps(ts(Gn),ss(ua,la,Ot,da,kt,X,ha,Pe,Q,me,le,de,$e),Ne,di(At,kt,X,Q,Se,le),pe,li,ge,zs(Ot,At,X,Q,Se,fe,le,re),Zs(gr,X,ee),wr,fe,pa,_r,ma,re,Le),ga=new WeakSet,bn=bi(te),vr=Gs(new Uint32Array(1)),wa=Zi(vr,pe),_a=Ki(vr),va=ds(ga,Ne,ge,bn,Oe,Gi(bn),wa,_a),Ft=as(ae),yr=ji(mr,Ue,de),br=$s(yr),st=Ai(Ft,Ne,na,ra,oa,hr,sa,pr,aa,Qi(Wt),ca),Er=Vi(si(Ue),yr),ya=ps(br,st,Q,Er,Vt),jt=Us(ns(Hn),gr,Xn,Bs,Xo,Yo,Zo,Ko,Qo,yt,$n,rt,fr),ba=hs(ot,ya,jt,J,st,fe,re,nt),Ea=As(ot,Cs,pe,J,Ti(ae,Wt),fe,re,Vt),it=yi(me,_r),Aa=Ji(J,it),$t=Pi(rt,Aa),Ca=xi(Ft,st,ae,it),qt=Bi(Ft,Ne,Ca,hr,pr),Ta=$i(Ne,ae,Dt,Hi(ae,Oe)),Ma=Ts(jt,$t,qt,Dt,ge,ea,re,Wt),Ar=new WeakMap,Na=vi(Ea,Ma,wr,re,Ar,nt),Cr=gi(te),Gt=ei(te),Tr=new WeakMap,Oa=ci(Tr,Oe),En=Cr?os(Ne,ge,Qs(te),Gt,ti(Jo),fe,Oa,re,Le,new WeakMap,new WeakMap,zi(Le,Oe),te):void 0,ka=wi(ot,Di,fe,re),Mr=ui(Ar),Ia=cs(Mr),Nr=qs(pe),Ra=Xs(Mr),Or=Ks(pe),kr=new WeakMap,Sa=ni(kr,ee),La=Li(Nr,pe,J,$t,lr,qt,ae,Dt,ge,Or,Gt,Sa,it),Pa=Oi(J,La,ae,ge,it),Ua=Fs(br,Nr,st,$t,lr,qt,ae,Ra,Or,Gt,Q,Le,Oe,Er,Vt,Ta),Ba=ii(Tr),xa=qi(kr),An=Cr?Ds(Ia,ot,jt,Ua,Pa,X,Ba,fe,re,Le,ta,xa,ia,nt):void 0,Da=_i(J,ge,Xi,Na,rt),Ir="Missing AudioWorklet support. Maybe this is not running in a secure context.",Wa=async(e,t,n,r,o)=>{const{encoderId:s,port:i}=await Fn(o,t.sampleRate);if(An===void 0)throw new Error(Ir);const c=new ba(t,{buffer:e}),a=new ka(t,{mediaStream:r}),u=qo(An,t,{channelCount:n});return{audioBufferSourceNode:c,encoderId:s,mediaStreamAudioSourceNode:a,port:i,recorderAudioWorkletNode:u}},Va=(e,t,n,r)=>(o,s,i)=>{var c;const a=(c=s.getAudioTracks()[0])===null||c===void 0?void 0:c.getSettings().sampleRate,u=new Da({latencyHint:"playback",sampleRate:a}),d=Math.max(1024,Math.ceil(u.baseLatency*u.sampleRate)),l=new va({length:d,sampleRate:u.sampleRate}),m=[],w=$o(y=>{if(En===void 0)throw new Error(Ir);return En(u,y)});let p=null,f=null,g=null,h=null,v=!0;const _=y=>{o.dispatchEvent(e("dataavailable",{data:new Blob(y,{type:i})}))},T=async(y,M)=>{const R=await qe(y,M);g===null?m.push(...R):(_(R),h=T(y,M))},b=()=>(v=!0,u.resume()),A=()=>{g!==null&&(p!==null&&(s.removeEventListener("addtrack",p),s.removeEventListener("removetrack",p)),f!==null&&clearTimeout(f),g.then(async({encoderId:y,mediaStreamAudioSourceNode:M,recorderAudioWorkletNode:R})=>{h!==null&&(h.catch(()=>{}),h=null),await R.stop(),M.disconnect(R);const N=await qe(y,null);g===null&&await E(),_([...m,...N]),m.length=0,o.dispatchEvent(new Event("stop"))}),g=null)},E=()=>(v=!1,u.suspend());return E(),{get mimeType(){return i},get state(){return g===null?"inactive":v?"recording":"paused"},pause(){if(g===null)throw n();v&&(E(),o.dispatchEvent(new Event("pause")))},resume(){if(g===null)throw n();v||(b(),o.dispatchEvent(new Event("resume")))},start(y){var M;if(g!==null)throw n();if(s.getVideoTracks().length>0)throw r();o.dispatchEvent(new Event("start"));const R=s.getAudioTracks(),N=R.length===0?2:(M=R[0].getSettings().channelCount)!==null&&M!==void 0?M:2;g=Promise.all([b(),w.then(()=>Wa(l,u,N,s,i))]).then(async([,{audioBufferSourceNode:P,encoderId:U,mediaStreamAudioSourceNode:x,port:I,recorderAudioWorkletNode:B}])=>(x.connect(B),await new Promise(W=>{P.onended=W,P.connect(B),P.start(u.currentTime+d/u.sampleRate)}),P.disconnect(B),await B.record(I),y!==void 0&&(h=T(U,y)),{encoderId:U,mediaStreamAudioSourceNode:x,recorderAudioWorkletNode:B}));const L=s.getTracks();p=()=>{A(),o.dispatchEvent(new ErrorEvent("error",{error:t()}))},s.addEventListener("addtrack",p),s.addEventListener("removetrack",p),f=setInterval(()=>{const P=s.getTracks();(P.length!==L.length||P.some((U,x)=>U!==L[x]))&&p!==null&&p()},1e3)},stop:A}};class pt{constructor(t,n=0,r){if(n<0||r!==void 0&&r<0)throw new RangeError;const o=t.reduce((d,l)=>d+l.byteLength,0);if(n>o||r!==void 0&&n+r>o)throw new RangeError;const s=[],i=r===void 0?o-n:r,c=[];let a=0,u=n;for(const d of t)if(c.length===0)if(d.byteLength>u){a=d.byteLength-u;const l=a>i?i:a;s.push(new DataView(d,u,l)),c.push(d)}else u-=d.byteLength;else if(a<i){a+=d.byteLength;const l=a>i?d.byteLength-a+i:d.byteLength;s.push(new DataView(d,0,l)),c.push(d)}this._buffers=c,this._byteLength=i,this._byteOffset=u,this._dataViews=s,this._internalBuffer=new DataView(new ArrayBuffer(8))}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get byteOffset(){return this._byteOffset}getFloat32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getFloat32(0,n)}getFloat64(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.setUint8(4,this.getUint8(t+4)),this._internalBuffer.setUint8(5,this.getUint8(t+5)),this._internalBuffer.setUint8(6,this.getUint8(t+6)),this._internalBuffer.setUint8(7,this.getUint8(t+7)),this._internalBuffer.getFloat64(0,n)}getInt16(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.getInt16(0,n)}getInt32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getInt32(0,n)}getInt8(t){const[n,r]=this._findDataViewWithOffset(t);return n.getInt8(t-r)}getUint16(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.getUint16(0,n)}getUint32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getUint32(0,n)}getUint8(t){const[n,r]=this._findDataViewWithOffset(t);return n.getUint8(t-r)}setFloat32(t,n,r){this._internalBuffer.setFloat32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setFloat64(t,n,r){this._internalBuffer.setFloat64(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3)),this.setUint8(t+4,this._internalBuffer.getUint8(4)),this.setUint8(t+5,this._internalBuffer.getUint8(5)),this.setUint8(t+6,this._internalBuffer.getUint8(6)),this.setUint8(t+7,this._internalBuffer.getUint8(7))}setInt16(t,n,r){this._internalBuffer.setInt16(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1))}setInt32(t,n,r){this._internalBuffer.setInt32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setInt8(t,n){const[r,o]=this._findDataViewWithOffset(t);r.setInt8(t-o,n)}setUint16(t,n,r){this._internalBuffer.setUint16(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1))}setUint32(t,n,r){this._internalBuffer.setUint32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setUint8(t,n){const[r,o]=this._findDataViewWithOffset(t);r.setUint8(t-o,n)}_findDataViewWithOffset(t){let n=0;for(const r of this._dataViews){const o=n+r.byteLength;if(t>=n&&t<o)return[r,n];n=o}throw new RangeError}}const Fa=(e,t,n)=>(r,o,s,i)=>{const c=[],a=new o(s,{mimeType:"audio/webm;codecs=pcm"});let u=null,d=()=>{};const l=p=>{r.dispatchEvent(e("dataavailable",{data:new Blob(p,{type:i})}))},m=async(p,f)=>{const g=await qe(p,f);a.state==="inactive"?c.push(...g):(l(g),u=m(p,f))},w=()=>{a.state!=="inactive"&&(u!==null&&(u.catch(()=>{}),u=null),d(),d=()=>{},a.stop())};return a.addEventListener("error",p=>{w(),r.dispatchEvent(new ErrorEvent("error",{error:p.error}))}),a.addEventListener("pause",()=>r.dispatchEvent(new Event("pause"))),a.addEventListener("resume",()=>r.dispatchEvent(new Event("resume"))),a.addEventListener("start",()=>r.dispatchEvent(new Event("start"))),{get mimeType(){return i},get state(){return a.state},pause(){return a.pause()},resume(){return a.resume()},start(p){const[f]=s.getAudioTracks();if(f!==void 0&&a.state==="inactive"){const{channelCount:g,sampleRate:h}=f.getSettings();if(g===void 0)throw new Error("The channelCount is not defined.");if(h===void 0)throw new Error("The sampleRate is not defined.");let v=!1,_=!1,T=0,b=Fn(i,h);d=()=>{_=!0};const A=jn(a,"dataavailable")(({data:E})=>{T+=1;const y=E.arrayBuffer();b=b.then(async({dataView:M=null,elementType:R=null,encoderId:N,port:L})=>{const P=await y;T-=1;const U=M===null?new pt([P]):new pt([...M.buffers,P],M.byteOffset);if(!v&&a.state==="recording"&&!_){const O=n(U,0);if(O===null)return{dataView:U,elementType:R,encoderId:N,port:L};const{value:S}=O;if(S!==172351395)return{dataView:M,elementType:R,encoderId:N,port:L};v=!0}const{currentElementType:x,offset:I,contents:B}=t(U,R,g),W=I<U.byteLength?new pt(U.buffers,U.byteOffset+I):null;return B.forEach(O=>L.postMessage(O,O.map(({buffer:S})=>S))),T===0&&(a.state==="inactive"||_)&&(qe(N,null).then(O=>{l([...c,...O]),c.length=0,r.dispatchEvent(new Event("stop"))}),L.postMessage([]),L.close(),A()),{dataView:W,elementType:x,encoderId:N,port:L}})});p!==void 0&&b.then(({encoderId:E})=>u=m(E,p))}a.start(100)},stop:w}},ja=()=>typeof window>"u"?null:window,Rr=(e,t)=>{if(t>=e.byteLength)return null;const n=e.getUint8(t);if(n>127)return 1;if(n>63)return 2;if(n>31)return 3;if(n>15)return 4;if(n>7)return 5;if(n>3)return 6;if(n>1)return 7;if(n>0)return 8;const r=Rr(e,t+1);return r===null?null:r+8},$a=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Sr=[],zt=ja(),qa=Mo(zt),Lr=vo(qa),Ga=Va(Lr,Ao,Co,vt),Ht=Ro(Rr),za=ko(Ht),Ha=Io(Ht),Xa=yo(za,Ha),Ya=Fa(Lr,Xa,Ht),Za=Eo(zt),Ka=No(zt),Qa=To(Oo(vt),vt,Ga,Ya,Sr,bo(Za,$a),Ka),Ja=async e=>{Sr.push(await _o(e))},ec=Wn({characterize:({call:e})=>()=>e("characterize"),encode:({call:e})=>(t,n)=>e("encode",{recordingId:t,timeslice:n}),record:({call:e})=>async(t,n,r)=>{await e("record",{recordingId:t,sampleRate:n,typedArrays:r},r.map(({buffer:o})=>o))}}),tc=e=>{const t=new Worker(e);return ec(t)},nc=`(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,a=2*s,o=function(e,t){return function(r){var o=t.get(r),i=void 0===o?r.size:o<a?o+1:0;if(!r.has(i))return e(r,i);if(r.size<s){for(;r.has(i);)i=Math.floor(Math.random()*a);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,l=r(i),c=o(l,i),u=t(c);e.addUniqueNumber=u,e.generateUniqueNumber=c}(t)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,s=(e,t)=>Object.assign(new Error(e),{status:t}),a=t=>s('The handler of the method called "'.concat(t,'" returned an unexpected result.'),e),o=(t,r)=>async o=>{let{data:{id:i,method:l,params:c}}=o;const u=r[l];try{if(void 0===u)throw(e=>s('The requested method called "'.concat(e,'" is not supported.'),n))(l);const r=void 0===c?u():u(c);if(void 0===r)throw(t=>s('The handler of the method called "'.concat(t,'" returned no required result.'),e))(l);const o=r instanceof Promise?await r:r;if(null===i){if(void 0!==o.result)throw a(l)}else{if(void 0===o.result)throw a(l);const{result:e,transferables:r=[]}=o;t.postMessage({id:i,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:i})}};var i=r(455);const l=new Map,c=(e,r,n)=>({...r,connect:t=>{let{port:n}=t;n.start();const s=e(n,r),a=(0,i.generateUniqueNumber)(l);return l.set(a,(()=>{s(),n.close(),l.delete(a)})),{result:a}},disconnect:e=>{let{portId:r}=e;const n=l.get(r);if(void 0===n)throw(e=>s('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),t))(r);return n(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=function(e,t){const r=c(u,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=o(e,r);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)},d=e=>e.reduce(((e,t)=>e+t.length),0),h=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let s=0;s<t;s+=1){const t=e[s];void 0===r[s]&&(r[s]=[]);const a=t.shift();if(void 0===a)break e;r[s].push(a),0===s&&(n+=a.length)}}if(n>t){const s=n-t;r.forEach(((t,r)=>{const n=t.pop(),a=n.length-s;t.push(n.subarray(0,a)),e[r].unshift(n.subarray(a))}))}return r},f=new Map,m=(e=>(t,r,n)=>{const s=e.get(t);if(void 0===s){const s={channelDataArrays:n.map((e=>[e])),isComplete:!0,sampleRate:r};return e.set(t,s),s}return s.channelDataArrays.forEach(((e,t)=>e.push(n[t]))),s})(f),p=((e,t)=>(r,n,s,a)=>{const o=s>>3,i="subsequent"===n?0:44,l=r.length,c=e(r[0]),u=new ArrayBuffer(c*l*o+i),d=new DataView(u);return"subsequent"!==n&&t(d,s,l,"complete"===n?c:Number.POSITIVE_INFINITY,a),r.forEach(((e,t)=>{let r=i+t*o;e.forEach((e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=l*o}}))})),[u]})(d,((e,t,r,n,s)=>{const a=t>>3,o=Math.min(n*r*a,4294967251);e.setUint32(0,1380533830),e.setUint32(4,o+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,s,!0),e.setUint32(28,s*r*a,!0),e.setUint16(32,r*a,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,o,!0)})),v=new Map;u(self,{characterize:()=>({result:/^audio\\/wav$/}),encode:e=>{let{recordingId:t,timeslice:r}=e;const n=v.get(t);void 0!==n&&(v.delete(t),n.reject(new Error("Another request was made to initiate an encoding.")));const s=f.get(t);if(null!==r){if(void 0===s||d(s.channelDataArrays[0])*(1e3/s.sampleRate)<r)return new Promise(((e,n)=>{v.set(t,{reject:n,resolve:e,timeslice:r})}));const e=h(s.channelDataArrays,Math.ceil(r*(s.sampleRate/1e3))),n=p(e,s.isComplete?"initial":"subsequent",16,s.sampleRate);return s.isComplete=!1,{result:n,transferables:n}}if(void 0!==s){const e=p(s.channelDataArrays,s.isComplete?"complete":"subsequent",16,s.sampleRate);return f.delete(t),{result:e,transferables:e}}return{result:[],transferables:[]}},record:e=>{let{recordingId:t,sampleRate:r,typedArrays:n}=e;const s=m(t,r,n),a=v.get(t);if(void 0!==a&&d(s.channelDataArrays[0])*(1e3/r)>=a.timeslice){const e=h(s.channelDataArrays,Math.ceil(a.timeslice*(r/1e3))),n=p(e,s.isComplete?"initial":"subsequent",16,r);s.isComplete=!1,v.delete(t),a.resolve({result:n,transferables:n})}return{result:null}}})})()})();`,rc=new Blob([nc],{type:"application/javascript; charset=utf-8"}),Pr=URL.createObjectURL(rc),oc=tc(Pr),sc=oc.connect;URL.revokeObjectURL(Pr);function ic(e){let t;return{c(){t=Y("button"),H(t,"class","loading w-40 h-40 bg-cover bg-no-repeat transition-all duration-300 ease-in-out rounded-full border-4 border-[#DF3A5C] svelte-19yqj34"),t.disabled=!0},m(n,r){Me(n,t,r)},p:Ce,d(n){n&&he(t)}}}function ac(e){let t,n,r,o;return{c(){t=Y("button"),H(t,"class",n="w-40 h-40 bg-cover bg-no-repeat transition-all duration-300 ease-in-out rounded-full border-4 border-[#DF3A5C] "+(e[1]?"recording":"hover:scale-110")+" svelte-19yqj34"),Kt(t,"background-image","url("+(e[1]?Jt:Qt)+")")},m(s,i){Me(s,t,i),r||(o=$r(t,"click",e[4]),r=!0)},p(s,i){i&2&&n!==(n="w-40 h-40 bg-cover bg-no-repeat transition-all duration-300 ease-in-out rounded-full border-4 border-[#DF3A5C] "+(s[1]?"recording":"hover:scale-110")+" svelte-19yqj34")&&H(t,"class",n),i&2&&Kt(t,"background-image","url("+(s[1]?Jt:Qt)+")")},d(s){s&&he(t),r=!1,o()}}}function cc(e){let t;function n(s,i){return s[0]?ic:ac}let r=n(e),o=r(e);return{c(){o.c(),t=jr()},m(s,i){o.m(s,i),Me(s,t,i)},p(s,[i]){r===(r=n(s))&&o?o.p(s,i):(o.d(1),o=r(s),o&&(o.c(),o.m(t.parentNode,t)))},i:Ce,o:Ce,d(s){s&&he(t),o.d(s)}}}const uc=1,lc=3e3;function dc(e,t,n){zr(async()=>{await Ja(await sc())});const r=Hr();let{isLoading:o=!1}=t,s=null,i=null,c=[],a=!1,u=null;async function d(){n(1,a=!0),c=[],r("start"),s=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new Qa(s,{mimeType:"audio/wav"}),i.addEventListener("dataavailable",_=>{c.push(_.data)}),i.addEventListener("stop",()=>{s==null||s.getTracks().forEach(_=>_.stop())});const w=new AudioContext,p=w.createMediaStreamSource(s),f=w.createAnalyser();p.connect(f);const g=f.frequencyBinCount,h=new Uint8Array(g);function v(){f.getByteFrequencyData(h),h.reduce((b,A)=>b+A,0)/g<uc?u||(u=setTimeout(()=>{l()},lc)):(clearTimeout(u),u=null),a&&requestAnimationFrame(v)}i.start(500),requestAnimationFrame(v)}async function l(){n(1,a=!1),i==null||i.stop(),r("stop",c)}const m=()=>{a?l():d()};return e.$$set=w=>{"isLoading"in w&&n(0,o=w.isLoading)},[o,a,d,l,m]}class fc extends Bn{constructor(t){super(),Un(this,t,dc,cc,On,{isLoading:0})}}const hc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M12%2021q-3.45%200-6.012-2.287T3.05%2013H5.1q.35%202.6%202.313%204.3T12%2019q2.925%200%204.963-2.037T19%2012q0-2.925-2.037-4.962T12%205q-1.725%200-3.225.8T6.25%208H9v2H3V4h2v2.35q1.275-1.6%203.113-2.475T12%203q1.875%200%203.513.713t2.85%201.924q1.212%201.213%201.925%202.85T21%2012q0%201.875-.712%203.513t-1.925%202.85q-1.213%201.212-2.85%201.925T12%2021m2.8-4.8L11%2012.4V7h2v4.6l3.2%203.2z'/%3e%3c/svg%3e";function Cn(e){let t,n,r,o,s;return{c(){t=Y("div"),n=Y("span"),n.textContent="You said:",r=ce(),o=Y("span"),s=Je(e[0]),H(n,"class","text-[#050A30] italic mb-2"),H(o,"class",""),H(t,"class","userSpeech text-base md:text-xl xl:text-2xl mt-10")},m(i,c){Me(i,t,c),z(t,n),z(t,r),z(t,o),z(o,s)},p(i,c){c&1&&kn(s,i[0])},d(i){i&&he(t)}}}function Tn(e){let t,n,r,o,s;return{c(){t=Y("div"),n=Y("span"),n.textContent="ChatGPT said:",r=ce(),o=Y("span"),s=Je(e[1]),H(n,"class","text-[#050A30] italic mb-2"),H(o,"class",""),H(t,"class","userSpeech text-base md:text-xl xl:text-2xl mt-4")},m(i,c){Me(i,t,c),z(t,n),z(t,r),z(t,o),z(o,s)},p(i,c){c&2&&kn(s,i[1])},d(i){i&&he(t)}}}function pc(e){let t,n,r,o,s,i,c,a,u,d,l,m,w,p;function f(_){e[4](_)}let g={};e[2]!==void 0&&(g.isLoading=e[2]),d=new fc({props:g}),mt.push(()=>to(d,"isLoading",f)),d.$on("start",e[5]),d.$on("stop",e[3]);let h=e[0]&&Cn(e),v=e[1]&&Tn(e);return{c(){t=Y("main"),n=Y("div"),n.innerHTML=`<button class="w-20"><img src="${hc}" alt="History" class="object-cover"/></button>`,r=ce(),o=Y("div"),s=Y("h1"),s.textContent="Karen. The Voice Assistant",i=ce(),c=Y("h6"),c.textContent="Click on the microphone to start speaking",a=ce(),u=Y("div"),no(d.$$.fragment),m=ce(),h&&h.c(),w=ce(),v&&v.c(),H(n,"class","absolute bottom-10 xl:top-10 right-5"),H(s,"class","text-3xl md:text-5xl xl:text-6xl text-[#050A30] text-center"),H(c,"class","italic text-xs md:text-sm mt-2"),H(u,"class","recorder mt-20 md:mt-40 xl:mt-60"),H(o,"class","container mx-auto flex flex-col items-center px-8 py-10 md:py-20 xl:py-30 h-full"),H(t,"class","relative w-full h-screen font-primary svelte-tmhv9f")},m(_,T){Me(_,t,T),z(t,n),z(t,r),z(t,o),z(o,s),z(o,i),z(o,c),z(o,a),z(o,u),Ln(d,u,null),z(o,m),h&&h.m(o,null),z(o,w),v&&v.m(o,null),p=!0},p(_,[T]){const b={};!l&&T&4&&(l=!0,b.isLoading=_[2],Zr(()=>l=!1)),d.$set(b),_[0]?h?h.p(_,T):(h=Cn(_),h.c(),h.m(o,w)):h&&(h.d(1),h=null),_[1]?v?v.p(_,T):(v=Tn(_),v.c(),v.m(o,null)):v&&(v.d(1),v=null)},i(_){p||(Sn(d.$$.fragment,_),p=!0)},o(_){eo(d.$$.fragment,_),p=!1},d(_){_&&he(t),Pn(d),h&&h.d(),v&&v.d()}}}function mc(e,t,n){let r=null,o=null,s=!1;async function i(u){n(2,s=!0);const d=new Blob(u.detail,{type:"audio/wav"}),l=new FormData;l.append("audio",d),fetch("/send-to-chatgpt",{method:"POST",body:l,headers:{"Cache-Control":"no-cache"}}).then(async m=>{const w=m.headers.get("Content-Type"),p=m.headers.get("user_input"),f=m.headers.get("chat_response");if(w!=null&&w.includes("audio/mpeg")){const h=await m.clone().arrayBuffer(),v=new Blob([h],{type:"audio/mpeg"}),_=URL.createObjectURL(v);new Audio(_).play()}p&&n(0,r=p),f&&n(1,o=f),n(2,s=!1)}).catch(m=>{console.error("Error sending audio to API:",m)})}function c(u){s=u,n(2,s)}return[r,o,s,i,c,()=>{n(0,r=null),n(1,o=null)}]}class gc extends Bn{constructor(t){super(),Un(this,t,mc,pc,On,{})}}new gc({target:document.getElementById("app")});
