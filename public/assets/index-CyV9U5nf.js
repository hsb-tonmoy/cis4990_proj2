var re=Object.defineProperty;var oe=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var P=(e,t,n)=>(oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function E(){}function z(e){return e()}function D(){return Object.create(null)}function C(e){e.forEach(z)}function K(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function se(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function G(e){return document.createTextNode(e)}function A(){return G(" ")}function ie(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ce(e){return Array.from(e.childNodes)}function ue(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let j;function q(e){j=e}const S=[],B=[];let T=[];const R=[],le=Promise.resolve();let V=!1;function ae(){V||(V=!0,le.then(J))}function k(e){T.push(e)}function fe(e){R.push(e)}const N=new Set;let x=0;function J(){if(x!==0)return;const e=j;do{try{for(;x<S.length;){const t=S[x];x++,q(t),de(t.$$)}}catch(t){throw S.length=0,x=0,t}for(q(null),S.length=0,x=0;B.length;)B.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];N.has(n)||(N.add(n),n())}T.length=0}while(S.length);for(;R.length;)R.pop()();V=!1,N.clear(),q(e)}function de(e){if(e.fragment!==null){e.update(),C(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}function he(e){const t=[],n=[];T.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),T=t}const L=new Set;let pe;function Q(e,t){e&&e.i&&(L.delete(e),e.i(t))}function me(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),pe.c.push(()=>{L.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function ge(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function _e(e){e&&e.c()}function W(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),k(()=>{const s=e.$$.on_mount.map(z).filter(K);e.$$.on_destroy?e.$$.on_destroy.push(...s):C(s),e.$$.on_mount=[]}),r.forEach(k)}function X(e,t){const n=e.$$;n.fragment!==null&&(he(n.after_update),C(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ye(e,t){e.$$.dirty[0]===-1&&(S.push(e),ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,o,r,s,i=null,a=[-1]){const m=j;q(e);const c=e.$$={fragment:null,ctx:[],props:s,update:E,not_equal:r,bound:D(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:D(),dirty:a,skip_bound:!1,root:t.target||m.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(h,$,...d)=>{const v=d.length?d[0]:$;return c.ctx&&r(c.ctx[h],c.ctx[h]=v)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](v),f&&ye(e,h)),$}):[],c.update(),f=!0,C(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const h=ce(t.target);c.fragment&&c.fragment.l(h),h.forEach(O)}else c.fragment&&c.fragment.c();t.intro&&Q(e.$$.fragment),W(e,t.target,t.anchor),J()}q(m)}class ee{constructor(){P(this,"$$");P(this,"$$set")}$destroy(){X(this,1),this.$destroy=E}$on(t,n){if(!K(n))return E;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ve="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ve);const I=""+new URL("mic-HR1ivggp.png",import.meta.url).href,F=""+new URL("stop-BDP2NVE4.png",import.meta.url).href;function $e(e){let t,n,o,r;return{c(){t=y("button"),g(t,"class",n="w-40 h-40 mt-60 bg-cover bg-no-repeat transition-all duration-300 ease-in-out rounded-full border border-[#ec7986] "+(e[0]?"recording":"hover:scale-110")+" svelte-1canqsz"),H(t,"background-image","url("+(e[0]?F:I)+")")},m(s,i){M(s,t,i),o||(r=ie(t,"click",e[4]),o=!0)},p(s,[i]){i&1&&n!==(n="w-40 h-40 mt-60 bg-cover bg-no-repeat transition-all duration-300 ease-in-out rounded-full border border-[#ec7986] "+(s[0]?"recording":"hover:scale-110")+" svelte-1canqsz")&&g(t,"class",n),i&1&&H(t,"background-image","url("+(s[0]?F:I)+")")},i:E,o:E,d(s){s&&O(t),o=!1,r()}}}const be=1,we=3e3;function xe(e,t,n){let{userSpeech:o=null}=t,r=null,s=null,i=[],a=!1,m=null;async function c(){n(3,o=null),n(0,a=!0),i=[],r=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(r,{mimeType:"audio/webm"}),s.addEventListener("dataavailable",w=>{i.push(w.data)}),s.addEventListener("stop",()=>{r==null||r.getTracks().forEach(w=>w.stop())});const d=new AudioContext,v=d.createMediaStreamSource(r),_=d.createAnalyser();v.connect(_);const u=_.frequencyBinCount,l=new Uint8Array(u);function b(){_.getByteFrequencyData(l),l.reduce((te,ne)=>te+ne,0)/u<be?m||(m=setTimeout(()=>{f()},we)):(clearTimeout(m),m=null),a&&requestAnimationFrame(b)}s.start(500),requestAnimationFrame(b)}async function f(){n(0,a=!1),s==null||s.stop(),await h()}async function h(){const d=new Blob(i,{type:"audio/webm"}),v=new FormData;v.append("audio",d),fetch("/speech-to-text",{method:"POST",body:v,headers:{"Cache-Control":"no-cache"}}).then(async _=>{const u=await _.json();n(3,o=u.text)}).catch(_=>{console.error("Error sending audio to API:",_)})}const $=()=>{a?f():c()};return e.$$set=d=>{"userSpeech"in d&&n(3,o=d.userSpeech)},[a,c,f,o,$]}class Se extends ee{constructor(t){super(),Z(this,t,xe,$e,Y,{userSpeech:3})}}const Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M12%2021q-3.45%200-6.012-2.287T3.05%2013H5.1q.35%202.6%202.313%204.3T12%2019q2.925%200%204.963-2.037T19%2012q0-2.925-2.037-4.962T12%205q-1.725%200-3.225.8T6.25%208H9v2H3V4h2v2.35q1.275-1.6%203.113-2.475T12%203q1.875%200%203.513.713t2.85%201.924q1.212%201.213%201.925%202.85T21%2012q0%201.875-.712%203.513t-1.925%202.85q-1.213%201.212-2.85%201.925T12%2021m2.8-4.8L11%2012.4V7h2v4.6l3.2%203.2z'/%3e%3c/svg%3e";function U(e){let t,n,o,r,s;return{c(){t=y("div"),n=y("span"),n.textContent="You said:",o=A(),r=y("span"),s=G(e[0]),g(n,"class","text-[#050A30] italic mb-2"),g(r,"class",""),g(t,"class","userSpeech text-2xl mt-10")},m(i,a){M(i,t,a),p(t,n),p(t,o),p(t,r),p(r,s)},p(i,a){a&1&&ue(s,i[0])},d(i){i&&O(t)}}}function Ae(e){let t,n,o,r,s,i,a,m,c,f,h,$,d;function v(l){e[1](l)}let _={};e[0]!==void 0&&(_.userSpeech=e[0]),f=new Se({props:_}),B.push(()=>ge(f,"userSpeech",v));let u=e[0]&&U(e);return{c(){t=y("main"),n=y("div"),n.innerHTML=`<button class="w-20"><img src="${Te}" alt="History" class="object-cover"/></button>`,o=A(),r=y("div"),s=y("h1"),s.textContent="Karen. The Voice Assistant",i=A(),a=y("h6"),a.textContent="Click on the microphone to start speaking",m=A(),c=y("div"),_e(f.$$.fragment),$=A(),u&&u.c(),g(n,"class","absolute top-10 right-5"),g(s,"class","text-6xl text-[#050A30]"),g(a,"class","italic text-sm mt-2"),g(c,"class","recorder"),g(r,"class","container mx-auto flex flex-col items-center py-40 h-full"),g(t,"class","relative w-full h-screen font-primary svelte-tmhv9f")},m(l,b){M(l,t,b),p(t,n),p(t,o),p(t,r),p(r,s),p(r,i),p(r,a),p(r,m),p(r,c),W(f,c,null),p(r,$),u&&u.m(r,null),d=!0},p(l,[b]){const w={};!h&&b&1&&(h=!0,w.userSpeech=l[0],fe(()=>h=!1)),f.$set(w),l[0]?u?u.p(l,b):(u=U(l),u.c(),u.m(r,null)):u&&(u.d(1),u=null)},i(l){d||(Q(f.$$.fragment,l),d=!0)},o(l){me(f.$$.fragment,l),d=!1},d(l){l&&O(t),X(f),u&&u.d()}}}function qe(e,t,n){let o=null;function r(s){o=s,n(0,o)}return[o,r]}class Ee extends ee{constructor(t){super(),Z(this,t,qe,Ae,Y,{})}}new Ee({target:document.getElementById("app")});
